<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <changeSet author="jmiranda (generated)" id="1282772258416-1">
        <addColumn tableName="shipment_method">
            <column name="shipper_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282772321026-16">
        <createIndex indexName="FK40203B263896C98E" tableName="shipment_method" unique="false">
            <column name="shipper_id"/>
        </createIndex>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1282861095818-1">
        <createIndex indexName="FK335CD11B6631D8CC" tableName="document" unique="false">
            <column name="document_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-2">
        <createIndex indexName="FK167303507D4BD1B" tableName="drug_product" unique="false">
            <column name="drug_route_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-3">
        <createIndex indexName="FK16730350BF6C3E5C" tableName="drug_product" unique="false">
            <column name="dosage_form_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-4">
        <createIndex indexName="FK16730350C2308EF4" tableName="drug_product" unique="false">
            <column name="package_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-5">
        <createIndex indexName="FK5C6729A3D970DB4" tableName="event" unique="false">
            <column name="event_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-6">
        <createIndex indexName="FKFE01941612A19DA7" tableName="inventory_item" unique="false">
            <column name="inventory_lot_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-7">
        <createIndex indexName="FK714F9FB561ED379F" tableName="location" unique="false">
            <column name="address_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-8">
        <createIndex indexName="FKED8DCCEFE0FEE896" tableName="product" unique="false">
            <column name="generic_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-9">
        <createIndex indexName="FK6C229EBE4F1E306E" tableName="product_attribute_value" unique="false">
            <column name="product_attribute_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-10">
        <createIndex indexName="FKD790DEBD154F600" tableName="reference_number" unique="false">
            <column name="reference_number_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-11">
        <createIndex indexName="FKE139719AA28CC5FB" tableName="shipment" unique="false">
            <column name="shipment_method_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-12">
        <createIndex indexName="FKC398CCBAC4A49BBF" tableName="shipment_comment" unique="false">
            <column name="comment_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-13">
        <createIndex indexName="FK6C5BE20C800AA15" tableName="shipment_document" unique="false">
            <column name="document_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-14">
        <createIndex indexName="FK6D032BB5786431F" tableName="shipment_event" unique="false">
            <column name="event_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-15">
        <createIndex indexName="FK40203B26296B2CA3" tableName="shipment_method" unique="false">
            <column name="shipper_service_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-17">
        <createIndex indexName="FK312F6C292388BC5" tableName="shipment_reference_number" unique="false">
            <column name="reference_number_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-18">
        <createIndex indexName="FKDF7559D73896C98E" tableName="shipper_service" unique="false">
            <column name="shipper_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-19">
        <createIndex indexName="FK7FA0D2DEB3FB7111" tableName="transaction" unique="false">
            <column name="transaction_type_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-20">
        <createIndex indexName="FKABC21FD12EF4C7F4" tableName="transaction_entry" unique="false">
            <column name="transaction_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1282861095818-21">
        <createIndex indexName="FK143BF46AFF37FDB5" tableName="user_role" unique="false">
            <column name="role_id"/>
        </createIndex>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1283380563115-1">
        <addColumn tableName="container">
            <column name="container_status" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1283380563115-2">
        <addColumn tableName="location">
            <column name="logo" type="MEDIUMBLOB"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1283380563115-3">
        <addColumn tableName="user">
            <column name="photo" type="MEDIUMBLOB"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1283826482822-1">
        <createTable tableName="receipt">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="actual_delivery_date" type="DATETIME"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="expected_delivery_date" type="DATETIME"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="recipient_id" type="BIGINT"/>
            <column name="shipment_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>        
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1283826482822-2">
        <createTable tableName="receipt_item">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="comment_id" type="BIGINT"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="expiration_date" type="DATETIME"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="lot_number" type="VARCHAR(255)"/>
            <column name="product_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="quantity_delivered" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="quantity_received" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="receipt_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="recipient_id" type="BIGINT"/>
            <column name="serial_number" type="VARCHAR(255)"/>
            <column name="accepted" type="BIT"/>
            <column name="comment" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1283827447136-1">
        <insert tableName="event_type">
            <column name="id" valueNumeric="7"/>
            <column name="version" valueNumeric="1"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description" value="Shipment is in transit"/>
            <column name="event_status" value="PENDING"/>
            <column name="last_updated" valueDate="2010-09-02"/>
            <column name="name" value="In Transit"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1284059441612-1">
        <addColumn tableName="event_type">
            <column name="activity_type" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284059441612-2">
		<sql>
			UPDATE event_type SET activity_type = 'SHIPPING' where id = 1;		
			UPDATE event_type SET activity_type = 'SHIPPING' where id = 2;		
			UPDATE event_type SET activity_type = 'SHIPPING' where id = 3;		
			UPDATE event_type SET activity_type = 'SHIPPING' where id = 4;		
			UPDATE event_type SET activity_type = 'RECEIVING' where id = 5;		
			UPDATE event_type SET activity_type = 'RECEIVING' where id = 6;
			UPDATE event_type SET activity_type = 'RECEIVING' where id = 7;							
		</sql>		
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284059441612-3">
        <addColumn tableName="location">
            <column name="managed_locally" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284059441612-4">
    	<comment>Allow all locations to be managed by this deployment.</comment>
		<sql>
			UPDATE location SET managed_locally = 1;		
		</sql>		
    </changeSet>

    <changeSet author="jmiranda (generated)" id="1284743822481-1">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK408272383B5F6286"/></not></preConditions>    
        <createIndex indexName="FK408272383B5F6286" tableName="receipt" unique="false">
            <column name="shipment_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284743822481-2">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4082723844979D51"/></not></preConditions>    
        <createIndex indexName="FK4082723844979D51" tableName="receipt" unique="false">
            <column name="recipient_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284743822481-3">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKAE3064BA44979D51"/></not></preConditions>    
        <createIndex indexName="FKAE3064BA44979D51" tableName="receipt_item" unique="false">
            <column name="recipient_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284743822481-4">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKAE3064BADED5FAE7"/></not></preConditions>    
        <createIndex indexName="FKAE3064BADED5FAE7" tableName="receipt_item" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1284743822481-5">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKAE3064BAF7076438"/></not></preConditions>    
        <createIndex indexName="FKAE3064BAF7076438" tableName="receipt_item" unique="false">
            <column name="receipt_id"/>
        </createIndex>
    </changeSet>
	<changeSet author="jmiranda" id="1284743822481-6">
		<sql>
			ALTER TABLE address ENGINE = InnoDB;
			ALTER TABLE address ENGINE = InnoDB;
			ALTER TABLE attribute ENGINE = InnoDB;
			ALTER TABLE attribute_value ENGINE = InnoDB;
			ALTER TABLE category ENGINE = InnoDB;
			ALTER TABLE comment ENGINE = InnoDB;
			ALTER TABLE container ENGINE = InnoDB;
			ALTER TABLE container_type ENGINE = InnoDB;
			ALTER TABLE document ENGINE = InnoDB;
			ALTER TABLE document_type ENGINE = InnoDB;
			ALTER TABLE donor ENGINE = InnoDB;
			ALTER TABLE dosage_form ENGINE = InnoDB;
			ALTER TABLE drug_class ENGINE = InnoDB;
			ALTER TABLE drug_product ENGINE = InnoDB;
			ALTER TABLE drug_route_type ENGINE = InnoDB;
			ALTER TABLE durable_product ENGINE = InnoDB;
			ALTER TABLE event ENGINE = InnoDB;
			ALTER TABLE event_type ENGINE = InnoDB;
			ALTER TABLE generic_type ENGINE = InnoDB;
			ALTER TABLE inventory ENGINE = InnoDB;
			ALTER TABLE inventory_item ENGINE = InnoDB;
			ALTER TABLE inventory_lot ENGINE = InnoDB;
			ALTER TABLE location ENGINE = InnoDB;
			ALTER TABLE package_type ENGINE = InnoDB;
			ALTER TABLE person ENGINE = InnoDB;
			ALTER TABLE product ENGINE = InnoDB;
			ALTER TABLE product_attribute ENGINE = InnoDB;
			ALTER TABLE product_attribute_value ENGINE = InnoDB;
			ALTER TABLE product_category ENGINE = InnoDB;
			ALTER TABLE product_name ENGINE = InnoDB;
			ALTER TABLE product_tags ENGINE = InnoDB;
			ALTER TABLE product_type ENGINE = InnoDB;
			ALTER TABLE receipt ENGINE = InnoDB;
			ALTER TABLE receipt_item ENGINE = InnoDB;
			ALTER TABLE reference_number ENGINE = InnoDB;
			ALTER TABLE reference_number_type ENGINE = InnoDB;
			ALTER TABLE role ENGINE = InnoDB;
			ALTER TABLE shipment ENGINE = InnoDB;
			ALTER TABLE shipment_comment ENGINE = InnoDB;
			ALTER TABLE shipment_document ENGINE = InnoDB;
			ALTER TABLE shipment_event ENGINE = InnoDB;
			ALTER TABLE shipment_item ENGINE = InnoDB;
			ALTER TABLE shipment_method ENGINE = InnoDB;
			ALTER TABLE shipment_reference_number ENGINE = InnoDB;
			ALTER TABLE shipment_type ENGINE = InnoDB;
			ALTER TABLE shipment_type_container_type ENGINE = InnoDB;
			ALTER TABLE shipper ENGINE = InnoDB;
			ALTER TABLE shipper_service ENGINE = InnoDB;
			ALTER TABLE transaction ENGINE = InnoDB;
			ALTER TABLE transaction_entry ENGINE = InnoDB;
			ALTER TABLE transaction_type ENGINE = InnoDB;
			ALTER TABLE user ENGINE = InnoDB;
			ALTER TABLE user_role ENGINE = InnoDB;
			ALTER TABLE value ENGINE = InnoDB;			
		</sql>
	</changeSet>
	
	
    <changeSet author="jmiranda (generated)" id="1284743822481-7">
		<validCheckSum>52fee9405a1c7a89bb4779b1d17af6ba</validCheckSum>		
    	<comment>The sort order is used to sort the different event types chronologically.</comment>
		<sql>
			UPDATE event_type SET sort_order = 1 where id = 1;		
			UPDATE event_type SET sort_order = 2 where id = 2;		
			UPDATE event_type SET sort_order = 3 where id = 3;		
			UPDATE event_type SET sort_order = 4 where id = 4;		
			UPDATE event_type SET sort_order = 6 where id = 5;		
			UPDATE event_type SET sort_order = 7 where id = 6;
			UPDATE event_type SET sort_order = 5 where id = 7;							
		</sql>		
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1284743822481-8">
    	<comment>The event status field is used to distinguish between INITAL, PENDING, COMPLETE states.</comment>
		<sql>
			UPDATE event_type SET event_status = 'INITIAL' where id = 1;		
			UPDATE event_type SET event_status = 'PENDING' where id = 2;		
			UPDATE event_type SET event_status = 'PENDING' where id = 3;		
			UPDATE event_type SET event_status = 'COMPLETE' where id = 4;		
			UPDATE event_type SET event_status = 'INITIAL' where id = 5;		
			UPDATE event_type SET event_status = 'COMPLETE' where id = 6;
			UPDATE event_type SET event_status = 'PENDING' where id = 7;							
		</sql>		
    </changeSet>    
	<changeSet author="jmiranda (generated)" id="1284790199445-1">	
	    <preConditions onFail="MARK_RAN"><not><indexExists indexName="fk_shipment_item_recipient"/></not></preConditions>
	    <addForeignKeyConstraint constraintName="fk_shipment_item_recipient"
	    	baseTableName="shipment_item" baseColumnNames="recipient_id" referencedTableName="person" referencedColumnNames="id" />
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1287544235753-1">
        <addColumn tableName="container">
            <column name="sort_order" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1287544235753-2">
        <addColumn tableName="shipment">
            <column name="flight_information" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1287544235753-3">
        <dropNotNullConstraint columnDataType="VARCHAR(255)" columnName="content_type" tableName="document"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1287544235753-4">
        <addNotNullConstraint columnDataType="BIT" columnName="accepted" defaultNullValue="" tableName="receipt_item"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1288203894188-1">
        <addColumn tableName="shipment_item">
            <column name="shipment_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda" id="1288203894188-2">
		<comment>Shipment items are now tied to shipments, rather than containers.</comment>
		<sql>    	
			UPDATE shipment_item AS s
			  INNER JOIN container AS c ON c.id = s.container_id
			  SET s.shipment_id = c.shipment_id
			WHERE s.shipment_id is null or s.shipment_id = 0    
		</sql>
    </changeSet>
    <changeSet author="jmiranda" id="1288203894188-3">
		<comment>Changed named for the Shipped event type.</comment>
		<sql>    	
			UPDATE event_type SET name = 'Shipped' where id = 4 and name = 'Departed';	 
		</sql>
    </changeSet>    
    <changeSet author="jmiranda" id="1288203894188-4">
		<comment>Drop all indices because none of them have a corresponding foreign key constraint.  Generated the SQL for all 'alter table' statements using 'grails schema-export'.</comment>
		<sql>
			alter table `user` drop index FK36EBCB1171F854;
			alter table `user` drop index FK36EBCB41E07A73;		
			alter table attribute drop index FKC7AA9C2FFFE725;
			alter table attribute_value drop index FKD7F53A0E4BFE8EC8;
			alter table attribute_value drop index FKD7F53A0E361812E7;
			alter table category drop index FK302BCFE619A2EF8;
			alter table comment drop index FK38A5EE5FAF1302EB;
			alter table comment drop index FK38A5EE5FF885F087;
			alter table container drop index FKE7814C813B5F6286;
			alter table container drop index FKE7814C814B6A2E03;
			alter table container drop index FKE7814C8117A6E251;
			alter table container drop index FKE7814C8144979D51;
			alter table document drop index FK335CD11B6631D8CC;
			alter table drug_class drop index FKDD770419C427B631;
			alter table drug_product drop index FK167303507D4BD1B;
			alter table drug_product drop index FK16730350BF6C3E5C;
			alter table drug_product drop index FK16730350AE684D06;
			alter table drug_product drop index FK16730350C2308EF4;
			alter table event drop index FK5C6729A4415A5B0;
			alter table event drop index FK5C6729A3D970DB4;
			alter table inventory_item drop index FKFE01941612A19DA7;
			alter table inventory_item drop index FKFE019416DED5FAE7;
			alter table inventory_item drop index FKFE01941672A2C5B4;
			alter table inventory_lot drop index FKA518DDEEDED5FAE7;
			alter table location drop index FK714F9FB561ED379F;
			alter table location drop index FK714F9FB541E07A73;
			alter table location drop index FK714F9FB572A2C5B4;
			alter table product drop index FKED8DCCEFABD88AC6;
			alter table product drop index FKED8DCCEFEF4C770D;
			alter table product drop index FKED8DCCEFE0FEE896;
			alter table product_attribute drop index FK94A534C47B0D087;
			alter table product_attribute drop index FK94A534CDED5FAE7;
			alter table product_attribute_value drop index FK6C229EBE4F1E306E;
			alter table product_attribute_value drop index FK6C229EBE361812E7;
			alter table product_category drop index FKA0303E4EEF4C770D;
			alter table product_category drop index FKA0303E4EDED5FAE7;
			alter table product_name drop index FK3C7623DBDED5FAE7;
			alter table product_tags drop index FK3C78DD69DED5FAE7;
			alter table product_type drop index FK3C79388A4F625531;
			alter table receipt drop index FK408272383B5F6286;
			alter table receipt drop index FK4082723844979D51;
			alter table receipt_item drop index FKAE3064BAF7076438;
			alter table receipt_item drop index FKAE3064BA44979D51;
			alter table receipt_item drop index FKAE3064BADED5FAE7;
			alter table reference_number drop index FKD790DEBD154F600;
			alter table shipment drop index FKE139719AA28CC5FB;
			alter table shipment drop index FKE139719ADBDEDAC4;
			alter table shipment drop index FKE139719A49AB6B52;
			alter table shipment drop index FKE139719A44979D51;
			alter table shipment drop index FKE139719A1E2B3CDC;
			alter table shipment drop index FKE139719A294C1012;
			alter table shipment drop index FKE139719AFF77FF9B;
			alter table shipment_comment drop index FKC398CCBAC4A49BBF;
			alter table shipment_document drop index FK6C5BE20C800AA15;
			alter table shipment_event drop index FK6D032BB53B350242;
			alter table shipment_event drop index FK6D032BB5786431F;			
			alter table shipment_item drop index FKDA3BB29849AB6B52;
			alter table shipment_item drop foreign key fk_shipment_item_recipient;
			alter table shipment_item drop index FKDA3BB298DED5FAE7;
			<!--  
			alter table shipment_item drop foreign key FKDA3BB298DED5FAE7;
			-->
			alter table shipment_item drop index FKDA3BB29844979D51;
			alter table shipment_item drop index FKDA3BB2987400E88E;
			alter table shipment_method drop index FK40203B263896C98E;
			alter table shipment_method drop index FK40203B26296B2CA3;
			alter table shipment_reference_number drop index FK312F6C292388BC5;
			alter table shipment_type_container_type drop index FK69C15B8323E731F;
			alter table shipment_type_container_type drop index FK69C15B817A6E251;
			alter table shipper_service drop index FKDF7559D73896C98E;
			alter table transaction drop index FK7FA0D2DE15EC4455;
			alter table transaction drop index FK7FA0D2DEB3FB7111;
			alter table transaction drop index FK7FA0D2DEB9F1C442;
			alter table transaction drop index FK7FA0D2DE72A2C5B4;
			alter table transaction_entry drop index FKABC21FD1DED5FAE7;
			alter table transaction_entry drop index FKABC21FD12EF4C7F4;
			alter table user_role drop index FK143BF46AFF37FDB5;
			alter table user_role drop index FK143BF46AA462C195;
			<!-- INDEX NOT FOUND  
				alter table shipment_item drop index FKDA3BB2983B5F6286;
			-->
		</sql>
	</changeSet>			
    <changeSet author="jmiranda" id="1288203894188-5">
		<comment>Recreate all indices/foreign key constraints.  Generated the SQL for all 'alter table' statements using 'grails schema-export'.</comment>
		<sql>		
			alter table `user` add index FK36EBCB1171F854 (warehouse_id), add constraint FK36EBCB1171F854 foreign key (warehouse_id) references location (id);
			alter table `user` add index FK36EBCB41E07A73 (manager_id), add constraint FK36EBCB41E07A73 foreign key (manager_id) references `user` (id);
			alter table attribute add index FKC7AA9C2FFFE725 (default_value_id), add constraint FKC7AA9C2FFFE725 foreign key (default_value_id) references value (id);
			alter table attribute_value add index FKD7F53A0E4BFE8EC8 (attribute_options_id), add constraint FKD7F53A0E4BFE8EC8 foreign key (attribute_options_id) references attribute (id);
			alter table attribute_value add index FKD7F53A0E361812E7 (value_id), add constraint FKD7F53A0E361812E7 foreign key (value_id) references value (id);
			alter table category add index FK302BCFE619A2EF8 (parent_category_id), add constraint FK302BCFE619A2EF8 foreign key (parent_category_id) references category (id);
			alter table comment add index FK38A5EE5FAF1302EB (sender_id), add constraint FK38A5EE5FAF1302EB foreign key (sender_id) references `user` (id);
			alter table comment add index FK38A5EE5FF885F087 (recipient_id), add constraint FK38A5EE5FF885F087 foreign key (recipient_id) references `user` (id);
			alter table container add index FKE7814C813B5F6286 (shipment_id), add constraint FKE7814C813B5F6286 foreign key (shipment_id) references shipment (id);
			alter table container add index FKE7814C814B6A2E03 (parent_container_id), add constraint FKE7814C814B6A2E03 foreign key (parent_container_id) references container (id);
			alter table container add index FKE7814C8117A6E251 (container_type_id), add constraint FKE7814C8117A6E251 foreign key (container_type_id) references container_type (id);
			alter table container add index FKE7814C8144979D51 (recipient_id), add constraint FKE7814C8144979D51 foreign key (recipient_id) references person (id);
			alter table document add index FK335CD11B6631D8CC (document_type_id), add constraint FK335CD11B6631D8CC foreign key (document_type_id) references document_type (id);
			alter table drug_class add index FKDD770419C427B631 (parent_drug_class_id), add constraint FKDD770419C427B631 foreign key (parent_drug_class_id) references drug_class (id);
			alter table drug_product add index FK167303507D4BD1B (drug_route_type_id), add constraint FK167303507D4BD1B foreign key (drug_route_type_id) references drug_route_type (id);
			alter table drug_product add index FK16730350BF6C3E5C (dosage_form_id), add constraint FK16730350BF6C3E5C foreign key (dosage_form_id) references dosage_form (id);
			alter table drug_product add index FK16730350AE684D06 (drug_class_id), add constraint FK16730350AE684D06 foreign key (drug_class_id) references drug_class (id);
			alter table drug_product add index FK16730350C2308EF4 (package_type_id), add constraint FK16730350C2308EF4 foreign key (package_type_id) references package_type (id);
			alter table event add index FK5C6729A4415A5B0 (event_location_id), add constraint FK5C6729A4415A5B0 foreign key (event_location_id) references location (id);
			alter table event add index FK5C6729A3D970DB4 (event_type_id), add constraint FK5C6729A3D970DB4 foreign key (event_type_id) references event_type (id);
			alter table inventory_item add index FKFE01941612A19DA7 (inventory_lot_id), add constraint FKFE01941612A19DA7 foreign key (inventory_lot_id) references inventory_lot (id);
			alter table inventory_item add index FKFE019416DED5FAE7 (product_id), add constraint FKFE019416DED5FAE7 foreign key (product_id) references product (id);
			alter table inventory_item add index FKFE01941672A2C5B4 (inventory_id), add constraint FKFE01941672A2C5B4 foreign key (inventory_id) references inventory (id);
			alter table inventory_lot add index FKA518DDEEDED5FAE7 (product_id), add constraint FKA518DDEEDED5FAE7 foreign key (product_id) references product (id);
			alter table location add index FK714F9FB561ED379F (address_id), add constraint FK714F9FB561ED379F foreign key (address_id) references address (id);
			alter table location add index FK714F9FB541E07A73 (manager_id), add constraint FK714F9FB541E07A73 foreign key (manager_id) references `user` (id);
			alter table location add index FK714F9FB572A2C5B4 (inventory_id), add constraint FK714F9FB572A2C5B4 foreign key (inventory_id) references inventory (id);
			alter table product add index FKED8DCCEFABD88AC6 (product_type_id), add constraint FKED8DCCEFABD88AC6 foreign key (product_type_id) references product_type (id);
			alter table product add index FKED8DCCEFEF4C770D (category_id), add constraint FKED8DCCEFEF4C770D foreign key (category_id) references category (id);
			alter table product add index FKED8DCCEFE0FEE896 (generic_type_id), add constraint FKED8DCCEFE0FEE896 foreign key (generic_type_id) references generic_type (id);
			alter table product_attribute add index FK94A534C47B0D087 (attribute_id), add constraint FK94A534C47B0D087 foreign key (attribute_id) references attribute (id);
			alter table product_attribute add index FK94A534CDED5FAE7 (product_id), add constraint FK94A534CDED5FAE7 foreign key (product_id) references product (id);
			alter table product_attribute_value add index FK6C229EBE4F1E306E (product_attribute_id), add constraint FK6C229EBE4F1E306E foreign key (product_attribute_id) references product_attribute (id);
			alter table product_attribute_value add index FK6C229EBE361812E7 (value_id), add constraint FK6C229EBE361812E7 foreign key (value_id) references value (id);
			alter table product_category add index FKA0303E4EEF4C770D (category_id), add constraint FKA0303E4EEF4C770D foreign key (category_id) references category (id);
			alter table product_category add index FKA0303E4EDED5FAE7 (product_id), add constraint FKA0303E4EDED5FAE7 foreign key (product_id) references product (id);
			alter table product_name add index FK3C7623DBDED5FAE7 (product_id), add constraint FK3C7623DBDED5FAE7 foreign key (product_id) references product (id);
			alter table product_tags add index FK3C78DD69DED5FAE7 (product_id), add constraint FK3C78DD69DED5FAE7 foreign key (product_id) references product (id);
			alter table product_type add index FK3C79388A4F625531 (parent_product_type_id), add constraint FK3C79388A4F625531 foreign key (parent_product_type_id) references product_type (id);
			alter table receipt add index FK408272383B5F6286 (shipment_id), add constraint FK408272383B5F6286 foreign key (shipment_id) references shipment (id);
			alter table receipt add index FK4082723844979D51 (recipient_id), add constraint FK4082723844979D51 foreign key (recipient_id) references person (id);
			alter table receipt_item add index FKAE3064BAF7076438 (receipt_id), add constraint FKAE3064BAF7076438 foreign key (receipt_id) references receipt (id);
			alter table receipt_item add index FKAE3064BA44979D51 (recipient_id), add constraint FKAE3064BA44979D51 foreign key (recipient_id) references person (id);
			alter table receipt_item add index FKAE3064BADED5FAE7 (product_id), add constraint FKAE3064BADED5FAE7 foreign key (product_id) references product (id);
			alter table reference_number add index FKD790DEBD154F600 (reference_number_type_id), add constraint FKD790DEBD154F600 foreign key (reference_number_type_id) references reference_number_type (id);
			alter table shipment add index FKE139719AA28CC5FB (shipment_method_id), add constraint FKE139719AA28CC5FB foreign key (shipment_method_id) references shipment_method (id);
			alter table shipment add index FKE139719ADBDEDAC4 (origin_id), add constraint FKE139719ADBDEDAC4 foreign key (origin_id) references location (id);
			alter table shipment add index FKE139719A49AB6B52 (donor_id), add constraint FKE139719A49AB6B52 foreign key (donor_id) references donor (id);
			alter table shipment add index FKE139719A44979D51 (recipient_id), add constraint FKE139719A44979D51 foreign key (recipient_id) references person (id);
			alter table shipment add index FKE139719A1E2B3CDC (destination_id), add constraint FKE139719A1E2B3CDC foreign key (destination_id) references location (id);
			alter table shipment add index FKE139719A294C1012 (carrier_id), add constraint FKE139719A294C1012 foreign key (carrier_id) references person (id);
			alter table shipment add index FKE139719AFF77FF9B (shipment_type_id), add constraint FKE139719AFF77FF9B foreign key (shipment_type_id) references shipment_type (id);
			alter table shipment_comment add index FKC398CCBAC4A49BBF (comment_id), add constraint FKC398CCBAC4A49BBF foreign key (comment_id) references comment (id);
			alter table shipment_document add index FK6C5BE20C800AA15 (document_id), add constraint FK6C5BE20C800AA15 foreign key (document_id) references document (id);
			alter table shipment_event add index FK6D032BB53B350242 (shipment_events_id), add constraint FK6D032BB53B350242 foreign key (shipment_events_id) references shipment (id);
			alter table shipment_event add index FK6D032BB5786431F (event_id), add constraint FK6D032BB5786431F foreign key (event_id) references event (id);
			alter table shipment_item add index FKDA3BB2983B5F6286 (shipment_id), add constraint FKDA3BB2983B5F6286 foreign key (shipment_id) references shipment (id);
			alter table shipment_item add index FKDA3BB29849AB6B52 (donor_id), add constraint FKDA3BB29849AB6B52 foreign key (donor_id) references donor (id);
			alter table shipment_item add index FKDA3BB29844979D51 (recipient_id), add constraint FKDA3BB29844979D51 foreign key (recipient_id) references person (id);
			alter table shipment_item add index FKDA3BB298DED5FAE7 (product_id), add constraint FKDA3BB298DED5FAE7 foreign key (product_id) references product (id);
			alter table shipment_item add index FKDA3BB2987400E88E (container_id), add constraint FKDA3BB2987400E88E foreign key (container_id) references container (id);
			alter table shipment_method add index FK40203B263896C98E (shipper_id), add constraint FK40203B263896C98E foreign key (shipper_id) references shipper (id);
			alter table shipment_method add index FK40203B26296B2CA3 (shipper_service_id), add constraint FK40203B26296B2CA3 foreign key (shipper_service_id) references shipper_service (id);
			alter table shipment_reference_number add index FK312F6C292388BC5 (reference_number_id), add constraint FK312F6C292388BC5 foreign key (reference_number_id) references reference_number (id);
			alter table shipment_type_container_type add index FK69C15B8323E731F (shipment_type_container_types_id), add constraint FK69C15B8323E731F foreign key (shipment_type_container_types_id) references shipment_type (id);
			alter table shipment_type_container_type add index FK69C15B817A6E251 (container_type_id), add constraint FK69C15B817A6E251 foreign key (container_type_id) references container_type (id);
			alter table shipper_service add index FKDF7559D73896C98E (shipper_id), add constraint FKDF7559D73896C98E foreign key (shipper_id) references shipper (id);
			alter table transaction add index FK7FA0D2DE15EC4455 (this_warehouse_id), add constraint FK7FA0D2DE15EC4455 foreign key (this_warehouse_id) references location (id);
			alter table transaction add index FK7FA0D2DEB3FB7111 (transaction_type_id), add constraint FK7FA0D2DEB3FB7111 foreign key (transaction_type_id) references transaction_type (id);
			alter table transaction add index FK7FA0D2DEB9F1C442 (target_warehouse_id), add constraint FK7FA0D2DEB9F1C442 foreign key (target_warehouse_id) references location (id);
			alter table transaction add index FK7FA0D2DE72A2C5B4 (inventory_id), add constraint FK7FA0D2DE72A2C5B4 foreign key (inventory_id) references inventory (id);
			alter table transaction_entry add index FKABC21FD1DED5FAE7 (product_id), add constraint FKABC21FD1DED5FAE7 foreign key (product_id) references product (id);
			alter table transaction_entry add index FKABC21FD12EF4C7F4 (transaction_id), add constraint FKABC21FD12EF4C7F4 foreign key (transaction_id) references transaction (id);
			alter table user_role add index FK143BF46AFF37FDB5 (role_id), add constraint FK143BF46AFF37FDB5 foreign key (role_id) references role (id);
			alter table user_role add index FK143BF46AA462C195 (user_id), add constraint FK143BF46AA462C195 foreign key (user_id) references `user` (id);
		</sql>
	</changeSet>    
    <changeSet author="jmiranda" id="1288203894188-6">
		<comment>The parent container of a shipment item must be nullable.</comment>
		<sql>
			ALTER TABLE shipment_item MODIFY COLUMN container_id BIGINT(20) DEFAULT NULL;
		</sql>
	</changeSet>		
    <changeSet author="jmiranda" id="1289252228964-1">
	    <validCheckSum>ee23dff97958f73c667be43f1aeba9f</validCheckSum>
    	<comment>Delete all transaction types.</comment>
    	<sql>	
    		DELETE FROM transaction_type;    	
    	</sql>
	</changeSet>
    <changeSet author="jmiranda" id="1289252228964-2">
    	<validCheckSum>80e35da905d0bbf2c59bfca218834f</validCheckSum>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="1"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Transfer"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="2"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Consumption"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="3"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Adjustment"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="4"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Expired"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="5"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Damaged"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="6"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-11-08"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-11-08"/>
            <column name="name" value="Borrowed"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
    </changeSet>
    
	<changeSet author="jmiranda" id="1290012682448-0">
    	<comment>Delete all product types.</comment>
    	<sql>	
		    update product set product_type_id = null;
    	</sql>
	</changeSet>    

	<changeSet author="jmiranda" id="1290012682448-1">
    	<comment>Delete all product types.</comment>
    	<sql>	
		    delete from product_type;
    	</sql>
	</changeSet>    

    <changeSet author="jmiranda (generated)" id="1290012682448-2">
        <insert tableName="product_type">
            <column name="id" valueNumeric="1"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="HIV"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-3">
        <insert tableName="product_type">
            <column name="id" valueNumeric="2"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="TB"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="2"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-4">
        <insert tableName="product_type">
            <column name="id" valueNumeric="3"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Injectable"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="3"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-5">
        <insert tableName="product_type">
            <column name="id" valueNumeric="4"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Lab Supply"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="4"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-6">
        <insert tableName="product_type">
            <column name="id" valueNumeric="5"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Med Supply"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="5"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-7">
        <insert tableName="product_type">
            <column name="id" valueNumeric="6"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Radiology"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="6"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-8">
        <insert tableName="product_type">
            <column name="id" valueNumeric="7"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="SOP"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="7"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-9">
        <insert tableName="product_type">
            <column name="id" valueNumeric="8"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Topical"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="8"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-10">
        <insert tableName="product_type">
            <column name="id" valueNumeric="9"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Narcotic"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="9"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-11">
        <insert tableName="product_type">
            <column name="id" valueNumeric="10"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Oral Med"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="10"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-12">
        <insert tableName="product_type">
            <column name="id" valueNumeric="11"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Eye Care"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="11"/>
        </insert>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290012682448-13">
        <insert tableName="product_type">
            <column name="id" valueNumeric="12"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-08-25"/>
            <column name="description"/>
            <column name="last_updated" valueDate="2010-08-25"/>
            <column name="name" value="Nutrition"/>
            <column name="parent_product_type_id"/>
            <column name="sort_order" valueNumeric="12"/>
        </insert>
    </changeSet> 
	
    <changeSet author="jmiranda (generated)" id="1290446254184-01">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="transaction_entry"/>
    	</preConditions>
		<dropTable tableName="transaction_entry"/>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1290446254184-02">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="transaction"/>
    	</preConditions>
		<dropTable tableName="transaction"/>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1290446254184-03">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="inventory_inventory_lot"/>
    	</preConditions>
		<dropTable tableName="inventory_inventory_lot"/>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1290446254184-04">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="inventory_item"/>
    	</preConditions>
		<dropTable tableName="inventory_item"/>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1290446254184-05">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="inventory_lot"/>
    	</preConditions>
		<dropTable tableName="inventory_lot"/>		
	</changeSet>
	
    <changeSet author="jmiranda (generated)" id="1290449480096-1">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="inventory_item" /></not>
		</preConditions>   
        <createTable tableName="inventory_item">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="ideal_quantity" type="INT"/>
            <column name="inventory_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="inventory_item_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="lot_number" type="VARCHAR(255)"/>
            <column name="low_quantity" type="INT"/>
            <column name="max_quantity" type="INT"/>
            <column name="min_quantity" type="INT"/>
            <column name="product_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="reorder_quantity" type="INT"/>
            <column name="serial_number" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-2">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="inventory_lot" /></not>
		</preConditions>   
        <createTable tableName="inventory_lot">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="expiration_date" type="DATETIME"/>
            <column name="initial_quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="inventory_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="lot_number" type="VARCHAR(255)"/>
            <column name="manufacture_date" type="DATETIME"/>
            <column name="product_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>        
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-3">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="location_type" /></not>
		</preConditions>   
        <createTable tableName="location_type">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="sort_order" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-4">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="lookup" /></not>
		</preConditions>   
        <createTable tableName="lookup">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="sort_order" type="INT"/>
            <column name="class" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-5">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="product_code" /></not>
		</preConditions>   
        <createTable tableName="product_code">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="sort_order" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-6">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="product_group" /></not>
		</preConditions>   
        <createTable tableName="product_group">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="sort_order" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-7">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="setting" /></not>
		</preConditions>   
        <createTable tableName="setting">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(7)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-8">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="transaction" /></not>
		</preConditions>   
        <createTable tableName="transaction">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="destination_id" type="BIGINT"/>
            <column name="inventory_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="source_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="transaction_date" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="transaction_type_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-9">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="transaction_entry" /></not>
		</preConditions>   
		<createTable tableName="transaction_entry">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="inventory_item_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="lot_number" type="VARCHAR(255)"/>
            <column name="product_id" type="BIGINT"/>
            <column name="quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="transaction_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-10">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="unit_of_measure" /></not>
		</preConditions>    
        <createTable tableName="unit_of_measure">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-11">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="inventory" columnName="date_created"/></not>
		</preConditions>    
        <addColumn tableName="inventory">
            <column name="date_created" type="DATETIME"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-12">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="inventory" columnName="last_updated"/></not>
		</preConditions>    
        <addColumn tableName="inventory">
            <column name="last_updated" type="DATETIME"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-13">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="active"/></not>
		</preConditions>    
        <addColumn tableName="location">
            <column name="active" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-14">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="location_type_id"/></not>
		</preConditions>    
        <addColumn tableName="location">
            <column name="location_type_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-15">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="parent_location_id"/></not>
		</preConditions>    
        <addColumn tableName="location">
            <column name="parent_location_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-16">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="budget_code_id"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="budget_code_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-17">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="code"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="code" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-18">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="ean"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="ean" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-19">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="french_name"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="french_name" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-20">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="product_group_id"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="product_group_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-21">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="quantity_per_unit"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="quantity_per_unit" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-22">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="sku"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="sku" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-23">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="unit_of_measure_id"/></not>
		</preConditions>
		<addColumn tableName="product">
            <column name="unit_of_measure_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290449480096-24">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product_type" columnName="code"/></not>
		</preConditions>    
        <addColumn tableName="product_type">
            <column name="code" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>

	
	
	<!--  Made a mistake in associating the inventory levels with inventory items  -->
	<changeSet author="jmiranda (generated)" id="1290449480096-39">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="ideal_quantity"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="ideal_quantity"/>
	</changeSet>
	<changeSet author="jmiranda (generated)" id="1290449480096-40">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="low_quantity"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="low_quantity"/>
    </changeSet>
	<changeSet author="jmiranda (generated)" id="1290449480096-41">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="max_quantity"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="max_quantity"/>
    </changeSet>
	<changeSet author="jmiranda (generated)" id="1290449480096-42">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="min_quantity"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="min_quantity"/>
    </changeSet>
	<changeSet author="jmiranda (generated)" id="1290449480096-43">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="reorder_quantity"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="reorder_quantity"/>
    </changeSet>
	

	<!--  Creating the new inventory level table -->	
    <changeSet author="jmiranda (generated)" id="1290452414238-1">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="inventory_level" /></not>
		</preConditions>    
        <createTable tableName="inventory_level">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="ideal_quantity" type="INT"/>
            <column name="inventory_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="low_quantity" type="INT"/>
            <column name="max_quantity" type="INT"/>
            <column name="min_quantity" type="INT"/>
            <column name="product_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="reorder_quantity" type="INT"/>
        </createTable>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1290452414238-2">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="local"/></not>
		</preConditions>
        <addColumn tableName="location">
            <column name="local" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290452414238-3">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="location" columnName="local"/>
		</preConditions>
		<update tableName="location">
		    <column name="local" valueBoolean="true"/>
		</update>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1290452414238-4">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="location" columnName="active"/>
		</preConditions>
		<update tableName="location">
		    <column name="active" valueBoolean="true"/>
		</update>
	</changeSet>
	
    <changeSet author="jmiranda (generated)" id="1290477989262-1a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKFE01941672A2C5B4"/></not>
		</preConditions>    
        <createIndex indexName="FKFE01941672A2C5B4" tableName="inventory_item" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-1b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKFE01941672A2C5B4"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKFE01941672A2C5B4"
		    baseTableName="inventory_item" baseColumnNames="inventory_id"
		    referencedTableName="inventory" referencedColumnNames="id" />
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1290477989262-2a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKFE019416DED5FAE7"/></not>
		</preConditions>    
        <createIndex indexName="FKFE019416DED5FAE7" tableName="inventory_item" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-2b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKFE019416DED5FAE7"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKFE019416DED5FAE7"
		    baseTableName="inventory_item" baseColumnNames="product_id"
		    referencedTableName="product" referencedColumnNames="id" />
    </changeSet>    
    
    <changeSet author="jmiranda (generated)" id="1290477989262-3a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKC254A2E172A2C5B4"/></not>
		</preConditions>    
        <createIndex indexName="FKC254A2E172A2C5B4" tableName="inventory_level" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-3b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKC254A2E172A2C5B4"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKC254A2E172A2C5B4"
		    baseTableName="inventory_level" baseColumnNames="inventory_id"
		    referencedTableName="inventory" referencedColumnNames="id" />
    </changeSet>    
    
    <changeSet author="jmiranda (generated)" id="1290477989262-4a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKC254A2E1DED5FAE7"/></not>
		</preConditions>    
        <createIndex indexName="FKC254A2E1DED5FAE7" tableName="inventory_level" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-4b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKC254A2E1DED5FAE7"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKC254A2E1DED5FAE7"
		    baseTableName="inventory_level" baseColumnNames="product_id"
		    referencedTableName="product" referencedColumnNames="id" />
    </changeSet>    
    
    <changeSet author="jmiranda (generated)" id="1290477989262-5a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKA518DDEE72A2C5B4"/></not>
		</preConditions>    
        <createIndex indexName="FKA518DDEE72A2C5B4" tableName="inventory_lot" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-5b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKA518DDEE72A2C5B4"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKA518DDEE72A2C5B4"
		    baseTableName="inventory_lot" baseColumnNames="inventory_id"
		    referencedTableName="inventory" referencedColumnNames="id" />
    </changeSet>        
    
    <changeSet author="jmiranda (generated)" id="1290477989262-6a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKA518DDEEDED5FAE7"/></not>
		</preConditions>    
        <createIndex indexName="FKA518DDEEDED5FAE7" tableName="inventory_lot" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-6b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKA518DDEEDED5FAE7"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKA518DDEEDED5FAE7"
		    baseTableName="inventory_lot" baseColumnNames="product_id"
		    referencedTableName="product" referencedColumnNames="id" />
    </changeSet>  
	<!-- Already exists -->        
	<!--  
    <changeSet author="jmiranda (generated)" id="1290477989262-7a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK714F9FB572A2C5B4"/></not>
		</preConditions>    
        <createIndex indexName="FK714F9FB572A2C5B4" tableName="location" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-7b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK714F9FB572A2C5B4"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK714F9FB572A2C5B4"
		    baseTableName="location" baseColumnNames="inventory_id"
		    referencedTableName="inventory" referencedColumnNames="id" />
    </changeSet>            
	-->
    <changeSet author="jmiranda (generated)" id="1290477989262-8a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK714F9FB57AF9A3C0"/></not>
		</preConditions>    
        <createIndex indexName="FK714F9FB57AF9A3C0" tableName="location" unique="false">
            <column name="parent_location_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-8b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK714F9FB57AF9A3C0"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK714F9FB57AF9A3C0"
		    baseTableName="location" baseColumnNames="parent_location_id"
		    referencedTableName="location" referencedColumnNames="id" />
    </changeSet>            
    
    <changeSet author="jmiranda (generated)" id="1290477989262-9a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK7FA0D2DE10746729"/></not>
		</preConditions>    
        <createIndex indexName="FK7FA0D2DE10746729" tableName="transaction" unique="false">
            <column name="destination_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-9b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK7FA0D2DE10746729"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK7FA0D2DE10746729"
		    baseTableName="transaction" baseColumnNames="destination_id"
		    referencedTableName="location" referencedColumnNames="id" />
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1290477989262-10a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK7FA0D2DE217F5972"/></not>
		</preConditions>    
        <createIndex indexName="FK7FA0D2DE217F5972" tableName="transaction" unique="false">
            <column name="created_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-10b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK7FA0D2DE217F5972"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK7FA0D2DE217F5972"
		    baseTableName="transaction" baseColumnNames="created_by_id"
		    referencedTableName="user" referencedColumnNames="id" />
    </changeSet> 

    <changeSet author="jmiranda (generated)" id="1290477989262-11a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK7FA0D2DE72A2C5B4"/></not>
		</preConditions>    
        <createIndex indexName="FK7FA0D2DE72A2C5B4" tableName="transaction" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-11b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK7FA0D2DE72A2C5B4"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK7FA0D2DE72A2C5B4"
		    baseTableName="transaction" baseColumnNames="inventory_id"
		    referencedTableName="inventory" referencedColumnNames="id" />
    </changeSet>            
    
    <changeSet author="jmiranda (generated)" id="1290477989262-12a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK7FA0D2DE74CDABFC"/></not>
		</preConditions>    
        <createIndex indexName="FK7FA0D2DE74CDABFC" tableName="transaction" unique="false">
            <column name="source_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-12b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK7FA0D2DE74CDABFC"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK7FA0D2DE74CDABFC"
		    baseTableName="transaction" baseColumnNames="source_id"
		    referencedTableName="location" referencedColumnNames="id" />
    </changeSet>

    <changeSet author="jmiranda (generated)" id="1290477989262-13a">
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FKABC21FD1DED5FAE7"/></not>
		</preConditions>    
        <createIndex indexName="FKABC21FD1DED5FAE7" tableName="transaction_entry" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1290477989262-13b">
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FKABC21FD1DED5FAE7"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FKABC21FD1DED5FAE7"
		    baseTableName="transaction_entry" baseColumnNames="product_id"
		    referencedTableName="product" referencedColumnNames="id" />
    </changeSet>         
    
    <changeSet author="jmiranda (generated)" id="1291325368079-1">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="transaction" columnName="confirmed"/></not>
		</preConditions>    
        <addColumn tableName="transaction">
            <column name="confirmed" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1291325368079-2">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="transaction" columnName="confirmed_by_id"/></not>
		</preConditions>    
        <addColumn tableName="transaction">
            <column name="confirmed_by_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1291325368079-3">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="transaction" columnName="date_confirmed"/></not>
		</preConditions>    
        <addColumn tableName="transaction">
            <column name="date_confirmed" type="DATETIME"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1291325368079-4">
        <dropNotNullConstraint columnDataType="BIGINT" columnName="inventory_item_id" tableName="transaction_entry"/>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1291325368079-5">
	    <validCheckSum>669055452cca72623ed36ee392d84bb</validCheckSum>
		<preConditions onFail="MARK_RAN">
			<not><indexExists indexName="FK7FA0D2DE3265A8A9"/></not>
		</preConditions>    
        <createIndex indexName="FK7FA0D2DE3265A8A9" tableName="transaction" unique="false">
            <column name="confirmed_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1291325368079-6">
		<validCheckSum>57d75746652eb44deab2779c4c038a0</validCheckSum>
		<preConditions onFail="MARK_RAN">
			<not><foreignKeyConstraintExists foreignKeyName="FK7FA0D2DE3265A8A9"/></not>
		</preConditions>    
		<addForeignKeyConstraint constraintName="FK7FA0D2DE3265A8A9"
		    baseTableName="transaction" baseColumnNames="confirmed_by_id"
		    referencedTableName="user" referencedColumnNames="id" />
    </changeSet>          
    
    <changeSet author="jmiranda (generated)" id="1291651429819-1">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">select count(*) from transaction_type where name = "Inventory"</sqlCheck>
        </preConditions>
        <insert tableName="transaction_type">
            <column name="id" valueNumeric="7"/>
            <column name="version" valueNumeric="0"/>
            <column name="date_created" valueDate="2010-12-06"/>
            <column name="description" value="Inventory"/>
            <column name="last_updated" valueDate="2010-12-06"/>
            <column name="name" value="Inventory"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
	</changeSet>
	
    <changeSet author="jmiranda (generated)" id="1291651429819-2">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">select count(*) from location_type where name = "Warehouse"</sqlCheck>
        </preConditions>
        <insert tableName="location_type">
            <column name="id" valueNumeric="1"/>
            <column name="version" valueNumeric="0"/>
            <column name="code" value="locationType.warehouse"/>
            <column name="date_created" valueDate="2010-12-06"/>
            <column name="description" value="Warehouse"/>
            <column name="last_updated" valueDate="2010-12-06"/>
            <column name="name" value="Warehouse"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1291651429819-3">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">select count(*) from location_type where name = "Depot"</sqlCheck>
        </preConditions>
        <insert tableName="location_type">
            <column name="id" valueNumeric="2"/>
            <column name="version" valueNumeric="0"/>
            <column name="code" value="locationType.depot"/>
            <column name="date_created" valueDate="2010-12-06"/>
            <column name="description" value="Depot"/>
            <column name="last_updated" valueDate="2010-12-06"/>
            <column name="name" value="Depot"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1291651429819-4">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">select count(*) from location_type where name = "Pharmacy"</sqlCheck>
        </preConditions>
        <insert tableName="location_type">
            <column name="id" valueNumeric="3"/>
            <column name="version" valueNumeric="0"/>
            <column name="code" value="locationType.pharmacy"/>
            <column name="date_created" valueDate="2010-12-06"/>
            <column name="description" value="Pharmacy"/>
            <column name="last_updated" valueDate="2010-12-06"/>
            <column name="name" value="Pharmacy"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1291651429819-5">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">select count(*) from location_type where name = "Supplier"</sqlCheck>
        </preConditions>
        <insert tableName="location_type">
            <column name="id" valueNumeric="4"/>
            <column name="version" valueNumeric="0"/>
            <column name="code" value="locationType.supplier"/>
            <column name="date_created" valueDate="2010-12-06"/>
            <column name="description" value="Supplier"/>
            <column name="last_updated" valueDate="2010-12-06"/>
            <column name="name" value="Supplier"/>
            <column name="sort_order" valueNumeric="0"/>
        </insert>
	</changeSet>

    <changeSet author="jmiranda (generated)" id="1294078999350-1">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="attribute_options" />
			</not>
		</preConditions>
        <createTable tableName="attribute_options">
            <column name="attribute_id" type="BIGINT"/>
            <column name="options_string" type="VARCHAR(255)"/>
            <column name="options_idx" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-2">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="attribute" columnName="allow_other" />
			</not>
		</preConditions>
        <addColumn tableName="attribute">
            <column name="allow_other" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-3">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="event_type" columnName="event_type" />
			</not>
		</preConditions>
        <addColumn tableName="event_type">
            <column name="event_type" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-4">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="product" columnName="cold_chain" />
			</not>
		</preConditions>
        <addColumn tableName="product">
            <column name="cold_chain" type="BIT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-5">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="product_attribute" columnName="attributes_idx" />
			</not>
		</preConditions>
        <addColumn tableName="product_attribute">
            <column name="attributes_idx" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-6">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="product_attribute" columnName="value" />
			</not>
		</preConditions>
        <addColumn tableName="product_attribute">
            <column name="value" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-7">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="product_category" columnName="categories_idx" />
			</not>
		</preConditions>
        <addColumn tableName="product_category">
            <column name="categories_idx" type="INT"/>
        </addColumn>
    </changeSet>
	<changeSet author="jmiranda (generated)" id="1294078999350-8">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="product_category" columnName="product_categories_id" />
			</not>
		</preConditions>
		<addColumn tableName="product_category">
			<column name="product_categories_id" type="BIGINT" />
		</addColumn>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-9">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="transaction_type" columnName="transaction_type"/>
			</not>
		</preConditions>    
        <addColumn tableName="transaction_type">
            <column name="transaction_type" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-10">
		<preConditions onFail="MARK_RAN">
			<not>
				<columnExists tableName="inventory_item" columnName="description"/>
			</not>
		</preConditions>    
        <addColumn tableName="inventory_item">
            <column name="description" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1294078999350-11">
        <dropNotNullConstraint columnDataType="BIGINT" columnName="source_id" tableName="transaction"/>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1295640983183-1">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_item" columnName="expiration_date"/></not>
    	</preConditions>
        <addColumn tableName="inventory_item">
            <column name="expiration_date" type="DATETIME"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-2">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_item" columnName="date_created"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-3">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_item" columnName="date_created"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-4">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_item" columnName="date_created"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="supported" type="BIT">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-5">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_item" columnName="date_created"/></not>
    	</preConditions>
        <addColumn tableName="transaction_entry">
            <column name="comments" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <!-- 
    <changeSet author="jmiranda (generated)" id="1295640983183-6">
    	<preConditions onFail="MARK_RAN">
    		<not><indexExists indexName="FK714F9FB572A2C5B4"/></not>
    	</preConditions>
        <createIndex indexName="FK714F9FB572A2C5B4" tableName="location" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
     -->
    <changeSet author="jmiranda (generated)" id="1295640983183-7">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKD7F53A0E361812E7"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE attribute_value DROP INDEX `FKD7F53A0E361812E7`, DROP FOREIGN KEY `FKD7F53A0E361812E7`;	
    	</sql>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1295640983183-8">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKD7F53A0E4BFE8EC8"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE attribute_value DROP INDEX `FKD7F53A0E4BFE8EC8`, DROP FOREIGN KEY `FKD7F53A0E4BFE8EC8`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-9">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKDD770419C427B631"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE drug_class DROP INDEX `FKDD770419C427B631`, DROP FOREIGN KEY `FKDD770419C427B631`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-10">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FK16730350AE684D06"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE drug_product DROP INDEX `FK16730350AE684D06`, DROP FOREIGN KEY `FK16730350AE684D06`;	
    	</sql>
    </changeSet>
    
    
    <changeSet author="jmiranda (generated)" id="1295640983183-11">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKFE01941672A2C5B4"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE inventory_item DROP INDEX `FKFE01941672A2C5B4`, DROP FOREIGN KEY `FKFE01941672A2C5B4`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-12">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKA518DDEE72A2C5B4"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE inventory_lot DROP INDEX `FKA518DDEE72A2C5B4`, DROP FOREIGN KEY `FKA518DDEE72A2C5B4`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-13">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKA518DDEEDED5FAE7"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE inventory_lot DROP INDEX `FKA518DDEEDED5FAE7`, DROP FOREIGN KEY `FKA518DDEEDED5FAE7`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-14">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FK94A534C47B0D087"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE product_attribute DROP INDEX `FK94A534C47B0D087`, DROP FOREIGN KEY `FK94A534C47B0D087`;	
    	</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-15">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FK3C7623DBDED5FAE7"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE product_name DROP INDEX `FK3C7623DBDED5FAE7`, DROP FOREIGN KEY `FK3C7623DBDED5FAE7`;	
    	</sql>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-16">
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FK3C79388A4F625531"/>
    	</preConditions>
    	<sql>
	    	ALTER TABLE product_type DROP INDEX `FK3C79388A4F625531`, DROP FOREIGN KEY `FK3C79388A4F625531`;	
    	</sql>
    </changeSet>
    
    
    <changeSet author="jmiranda (generated)" id="1295640983183-17">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="inventory_item" columnName="inventory_id"/>
    	</preConditions>    
        <dropColumn columnName="inventory_id" tableName="inventory_item"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-18">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="inventory_item" columnName="inventory_item_type"/>
    	</preConditions>        
        <dropColumn columnName="inventory_item_type" tableName="inventory_item"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-19">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="inventory_level" columnName="ideal_quantity"/>
    	</preConditions>        
        <dropColumn columnName="ideal_quantity" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-20">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="inventory_level" columnName="low_quantity"/>
    	</preConditions>        
        <dropColumn columnName="low_quantity" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-21">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="inventory_level" columnName="max_quantity"/>
    	</preConditions>        
        <dropColumn columnName="max_quantity" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-22">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="attribute_value"/>
    	</preConditions>
        <dropTable tableName="attribute_value"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-23">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="drug_product"/>
    	</preConditions>
        <dropTable tableName="drug_product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-24">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="drug_class"/>
    	</preConditions>
        <dropTable tableName="drug_class"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-25">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="dosage_form"/>
    	</preConditions>
        <dropTable tableName="dosage_form"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-26">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="drug_route_type"/>
    	</preConditions>
        <dropTable tableName="drug_route_type"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-27">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="durable_product"/>
    	</preConditions>
        <dropTable tableName="durable_product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-28">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="inventory_lot"/>
    	</preConditions>
        <dropTable tableName="inventory_lot"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-29">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="lookup"/>
    	</preConditions>
        <dropTable tableName="lookup"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-30">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="product_code"/>
    	</preConditions>
        <dropTable tableName="product_code"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-31">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="product_group"/>
    	</preConditions>
        <dropTable tableName="product_group"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-32">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="product_name"/>
    	</preConditions>
        <dropTable tableName="product_name"/>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1295640983183-33">
    	<!-- Always fails even if the index exists. --><!-- 
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKED8DCCEFABD88AC6"/>
    	</preConditions>
    	 -->
    	<sql>
			ALTER TABLE `product` DROP INDEX `FKED8DCCEFABD88AC6`, DROP FOREIGN KEY `FKED8DCCEFABD88AC6`;
    	</sql>    	
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-34">
    	<!-- Always fails even if the index exists. --><!-- 
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKED8DCCEFE0FEE896"/>
    	</preConditions>
    	 -->
    	<sql>
			ALTER TABLE `product` DROP INDEX `FKED8DCCEFE0FEE896`, DROP FOREIGN KEY `FKED8DCCEFE0FEE896`;
    	</sql>
    </changeSet>    
    
    <changeSet author="jmiranda (generated)" id="1295640983183-35">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="product_type_id"/>
    	</preConditions>        
        <dropColumn columnName="product_type_id" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-36">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="generic_type_id"/>
    	</preConditions>        
        <dropColumn columnName="generic_type_id" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-37">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="image_src"/>
    	</preConditions>        
        <dropColumn columnName="image_src" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-38">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="unverified"/>
    	</preConditions>        
        <dropColumn columnName="unverified" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-39">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="upc"/>
    	</preConditions>        
        <dropColumn columnName="upc" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-40">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="budget_code_id"/>
    	</preConditions>        
        <dropColumn columnName="budget_code_id" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-41">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="code"/>
    	</preConditions>        
        <dropColumn columnName="code" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-42">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="ean"/>
    	</preConditions>        
        <dropColumn columnName="ean" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-43">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="french_name"/>
    	</preConditions>        
        <dropColumn columnName="french_name" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-44">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="product_group_id"/>
    	</preConditions>        
        <dropColumn columnName="product_group_id" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-45">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="quantity_per_unit"/>
    	</preConditions>        
        <dropColumn columnName="quantity_per_unit" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-46">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="sku"/>
    	</preConditions>        
        <dropColumn columnName="sku" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-47">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="product" columnName="unit_of_measure"/>
    	</preConditions>        
        <dropColumn columnName="unit_of_measure" tableName="product"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-48">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="product_type"/>
    	</preConditions>
        <dropTable tableName="product_type"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-49">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="product_attribute_value"/>
    	</preConditions>
        <dropTable tableName="product_attribute_value"/>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-50">
    	<!-- Always fails even if the index exists. --><!-- 
    	<preConditions onFail="MARK_RAN">
    		<indexExists indexName="FKC7AA9C2FFFE725"/>
    	</preConditions>
    	 -->
    	<sql>
			ALTER TABLE `attribute` DROP INDEX `FKC7AA9C2FFFE725`, DROP FOREIGN KEY `FKC7AA9C2FFFE725`;
    	</sql>
    </changeSet>        
    <changeSet author="jmiranda (generated)" id="1295640983183-51">
    	<preConditions onFail="MARK_RAN">
    		<tableExists tableName="value"/>
    	</preConditions>
        <dropTable tableName="value"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-52">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="attribute" columnName="default_value_id"/>
    	</preConditions>        
        <dropColumn columnName="default_value_id" tableName="attribute"/>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-53">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="attribute" columnName="allow_multiple"/>
    	</preConditions>        
        <dropColumn columnName="allow_multiple" tableName="attribute"/>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-54">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="attribute" columnName="label"/>
    	</preConditions>        
        <dropColumn columnName="label" tableName="attribute"/>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1295640983183-55">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="attribute" columnName="data_type"/>
    	</preConditions>        
        <dropColumn columnName="data_type" tableName="attribute"/>
    </changeSet>    
    
    
    
    <changeSet author="jmiranda (generated)" id="1295640983183-56">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_level" columnName="date_created"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-57">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_level" columnName="last_updated"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-58">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="inventory_level" columnName="supported"/></not>
    	</preConditions>
        <addColumn tableName="inventory_level">
            <column name="supported" type="BIT">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295640983183-59">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="transaction_entry" columnName="comments"/></not>
    	</preConditions>
        <addColumn tableName="transaction_entry">
            <column name="comments" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>

    <changeSet author="jmiranda (generated)" id="1295974965762-1">
        <dropNotNullConstraint columnDataType="DATETIME" columnName="date_created" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295974965762-2">
        <dropNotNullConstraint columnDataType="DATETIME" columnName="last_updated" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295974965762-3">
        <dropNotNullConstraint columnDataType="BIT" columnName="supported" tableName="inventory_level"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295974965762-4">
		<sql>
			DELETE FROM product_attribute 
			WHERE product_attribute.attribute_id IN 
				(SELECT attribute.id FROM attribute WHERE attribute.name IN ('Size', 'Vitality'));
		</sql>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1295974965762-5">
		<sql>
			DELETE FROM attribute WHERE name IN ('Size', 'Vitality');
		</sql>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1297115531347-1">
    	<preConditions onFail="MARK_RAN">
    		<not><columnExists tableName="transaction_entry" columnName="transaction_entries_idx"/></not>
    	</preConditions>
        <addColumn tableName="transaction_entry">
            <column name="transaction_entries_idx" type="INT"/>
        </addColumn>
    </changeSet>
    
	<changeSet author="jmiranda" id="1297432141595-1">
    	<comment>Remove all secondary product categories that have a null product category index value.</comment>
    	<sql>	
		    DELETE FROM product_category WHERE categories_idx IS NULL;
    	</sql>
	</changeSet>        
    
	<changeSet author="jmiranda" id="1297432141595-2">
    	<comment>Assign Boston warehouse to all users.</comment>
    	<sql>	
			UPDATE user SET warehouse_id = 1 WHERE warehouse_id IS NULL;
    	</sql>
	</changeSet>        

    <changeSet author="jmiranda (generated)" id="1297432141595-3">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM inventory JOIN location ON location.inventory_id = inventory.id WHERE location.id = 1]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="inventory">
            <column name="id" valueNumeric="1"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-02-17"/>
            <column name="last_updated" valueDate="2011-02-17"/>            
        </insert>
		<update tableName="location">
		    <column name="inventory_id" value="1"/>
		    <where>id=1</where>
		</update>        
    </changeSet>
    
     <changeSet author="mgoodrich" id="2011-02-25-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM container_type WHERE name = 'Crate']]>
			</sqlCheck>
		</preConditions>
        <insert tableName="container_type">
        	<column name="id" valueNumeric="8"/>
        	<column name="name" value="Crate"/>
        	<column name="sort_order" valueNumeric="0"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-02-25"/>
            <column name="last_updated" valueDate="2011-02-25"/>            
        </insert>      
    </changeSet>
    
     <changeSet author="mgoodrich" id="2011-02-28-1">
        <preConditions onFail="MARK_RAN">
        	<not>
				<tableExists tableName="shipment_workflow"/>
			</not>
		</preConditions>
         <sql>
         	CREATE TABLE `shipment_workflow` (
	  			`id` bigint(20) NOT NULL AUTO_INCREMENT,
	  			`version` bigint(20) NOT NULL,
	  			`date_created` datetime DEFAULT NULL,
	  			`last_updated` datetime DEFAULT NULL,
	  			`name` varchar(255) NOT NULL,
	  			`shipment_type_id` bigint(20) NOT NULL,
	  			PRIMARY KEY (`id`),
	  			UNIQUE KEY `shipment_type_id` (`shipment_type_id`),
	 			KEY `FKD584C4C4FF77FF9B` (`shipment_type_id`),
	  			CONSTRAINT `FKD584C4C4FF77FF9B` FOREIGN KEY (`shipment_type_id`) REFERENCES `shipment_type` (`id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8
         </sql>
    </changeSet>
    
    <changeSet author="mgoodrich" id="2011-02-28-2">
        <preConditions onFail="MARK_RAN">
        	<not>
				<tableExists tableName="shipment_workflow_container_type"/>
			</not>
		</preConditions>
         <sql>
         	CREATE TABLE `shipment_workflow_container_type` (
			  `shipment_workflow_container_types_id` bigint(20) DEFAULT NULL,
			  `container_type_id` bigint(20) DEFAULT NULL,
			  `container_types_idx` int(11) DEFAULT NULL,
			  KEY `FKDEF5AD1317A6E251` (`container_type_id`),
			  CONSTRAINT `FKDEF5AD1317A6E251` FOREIGN KEY (`container_type_id`) REFERENCES `container_type` (`id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
         </sql>
    </changeSet>
    
    <changeSet author="mgoodrich" id="2011-02-28-3">
        <preConditions onFail="MARK_RAN">
        	<not>
				<tableExists tableName="shipment_workflow_reference_number_type"/>
			</not>
		</preConditions>
         <sql>
			CREATE TABLE `shipment_workflow_reference_number_type` (
			  `shipment_workflow_reference_number_types_id` bigint(20) DEFAULT NULL,
			  `reference_number_type_id` bigint(20) DEFAULT NULL,
			  `reference_number_types_idx` int(11) DEFAULT NULL,
			  KEY `FK4BB27241154F600` (`reference_number_type_id`),
			  CONSTRAINT `FK4BB27241154F600` FOREIGN KEY (`reference_number_type_id`) REFERENCES `reference_number_type` (`id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
    </changeSet>
    
    <changeSet author="mgoodrich" id="2011-02-28-4">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM shipment_workflow]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="shipment_workflow">
        	<column name="id" valueNumeric="1"/>
        	<column name="name" value="Air shipment workflow"/>
        	<column name="shipment_type_id" valueNumeric="1"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-02-28"/>
            <column name="last_updated" valueDate="2011-02-28"/>            
        </insert> 
        <insert tableName="shipment_workflow">
        	<column name="id" valueNumeric="2"/>
        	<column name="name" value="Sea shipment workflow"/>
        	<column name="shipment_type_id" valueNumeric="2"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-02-28"/>
            <column name="last_updated" valueDate="2011-02-28"/>            
        </insert>     
         <insert tableName="shipment_workflow">
        	<column name="id" valueNumeric="3"/>
        	<column name="name" value="Suitcase shipment workflow"/>
        	<column name="shipment_type_id" valueNumeric="4"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-02-28"/>
            <column name="last_updated" valueDate="2011-02-28"/>            
        </insert>   
    </changeSet>
    
 
     <changeSet author="mgoodrich" id="2011-03-01-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM reference_number_type WHERE name="Air Waybill Number"]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="reference_number_type">
        	<column name="id" valueNumeric="5"/>
        	<column name="name" value="Air Waybill Number"/>
        	<column name="description" value="Air Waybill Number"/>
        	<column name="sort_order" valueNumeric="0"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-03-01"/>
            <column name="last_updated" valueDate="2011-03-01"/>            
        </insert>        
     </changeSet>
 
      <changeSet author="mgoodrich" id="2011-03-01-2">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM reference_number_type WHERE name="Container Number"]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="reference_number_type">
        	<column name="id" valueNumeric="6"/>
        	<column name="name" value="Container Number"/>
        	<column name="description" value="Container Number"/>
        	<column name="sort_order" valueNumeric="0"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-03-01"/>
            <column name="last_updated" valueDate="2011-03-01"/>            
        </insert>        
     </changeSet>
     
     <changeSet author="mgoodrich" id="2011-03-01-3">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM reference_number_type WHERE name="Seal Number"]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="reference_number_type">
        	<column name="id" valueNumeric="7"/>
        	<column name="name" value="Seal Number"/>
        	<column name="description" value="Seal Number"/>
        	<column name="sort_order" valueNumeric="0"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-03-01"/>
            <column name="last_updated" valueDate="2011-03-01"/>            
        </insert>        
     </changeSet>
     <changeSet author="mgoodrich" id="2011-03-01-4">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM reference_number_type WHERE name="Flight Number"]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="reference_number_type">
        	<column name="id" valueNumeric="8"/>
        	<column name="name" value="Flight Number"/>
        	<column name="description" value="Flight Number"/>
        	<column name="sort_order" valueNumeric="0"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-03-01"/>
            <column name="last_updated" valueDate="2011-03-01"/>            
        </insert>        
     </changeSet>
 
 	   <changeSet author="mgoodrich" id="2011-03-01-5">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM shipment_workflow_container_type]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="shipment_workflow_container_type">
        	<column name="shipment_workflow_container_types_id" valueNumeric="1"/>
        	<column name="container_type_id" valueNumeric="2"/>
        	<column name="container_types_idx" valueNumeric="0"/>   
        </insert>      
           <insert tableName="shipment_workflow_container_type">
        	<column name="shipment_workflow_container_types_id" valueNumeric="1"/>
        	<column name="container_type_id" valueNumeric="8"/>
        	<column name="container_types_idx" valueNumeric="1"/>   
        </insert>  
           <insert tableName="shipment_workflow_container_type">
        	<column name="shipment_workflow_container_types_id" valueNumeric="2"/>
        	<column name="container_type_id" valueNumeric="2"/>
        	<column name="container_types_idx" valueNumeric="0"/>   
        </insert>  
           <insert tableName="shipment_workflow_container_type">
        	<column name="shipment_workflow_container_types_id" valueNumeric="2"/>
        	<column name="container_type_id" valueNumeric="8"/>
        	<column name="container_types_idx" valueNumeric="1"/>   
        </insert>  
           <insert tableName="shipment_workflow_container_type">
        	<column name="shipment_workflow_container_types_id" valueNumeric="3"/>
        	<column name="container_type_id" valueNumeric="3"/>
        	<column name="container_types_idx" valueNumeric="0"/>   
        </insert>       
     </changeSet> 
 
    <changeSet author="mgoodrich" id="2011-03-01-6">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM shipment_workflow_reference_number_type]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="1"/>
        	<column name="reference_number_type_id" valueNumeric="5"/>
        	<column name="reference_number_types_idx" valueNumeric="0"/>   
        </insert>
          <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="1"/>
        	<column name="reference_number_type_id" valueNumeric="6"/>
        	<column name="reference_number_types_idx" valueNumeric="1"/>   
        </insert> 
          <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="1"/>
        	<column name="reference_number_type_id" valueNumeric="7"/>
        	<column name="reference_number_types_idx" valueNumeric="2"/>   
        </insert>  
          <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="2"/>
        	<column name="reference_number_type_id" valueNumeric="4"/>
        	<column name="reference_number_types_idx" valueNumeric="0"/>   
        </insert>
          <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="2"/>
        	<column name="reference_number_type_id" valueNumeric="6"/>
        	<column name="reference_number_types_idx" valueNumeric="1"/>   
        </insert>  
          <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="2"/>
        	<column name="reference_number_type_id" valueNumeric="7"/>
        	<column name="reference_number_types_idx" valueNumeric="2"/>   
        </insert> 
        <insert tableName="shipment_workflow_reference_number_type">
        	<column name="shipment_workflow_reference_number_types_id" valueNumeric="3"/>
        	<column name="reference_number_type_id" valueNumeric="8"/>
        	<column name="reference_number_types_idx" valueNumeric="0"/>   
        </insert> 
	</changeSet>

	<changeSet author="mgoodrich" id="2011-03-01-6-1">
        <preConditions onFail="MARK_RAN">
			<tableExists tableName="shipment_type_container_type"/>
		</preConditions>
			<dropTable tableName="shipment_type_container_type"/>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-01-7">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM shipment_type WHERE name = 'Domestic']]>
			</sqlCheck>
		</preConditions>
			<delete tableName="shipment_type">
   				 <where>name='Domestic'</where>
			</delete>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-01-8">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM shipment_type WHERE name = 'Other']]>
			</sqlCheck>
		</preConditions>
			<delete tableName="shipment_type">
   				 <where>name='Other'</where>
			</delete>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-01-9">
        <preConditions onFail="MARK_RAN">
			<columnExists tableName="shipment" columnName="flight_information"/>
		</preConditions>
			<dropColumn tableName="shipment" columnName="flight_information"/>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-01-10">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="shipment" columnName="additional_information"/></not>
		</preConditions>
			<addColumn tableName="shipment">
			  <column name="additional_information" type="longtext"/>
			 </addColumn>
	</changeSet>
	
	
	<changeSet author="mgoodrich" id="2011-03-02-1">
       <modifyColumn tableName="location">
    		<column name="address_id" type="bigint(20)">
    			<constraints nullable="true"/>
    		</column>
		</modifyColumn>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-02-2">
       <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM location WHERE id = 1 AND location_type_id IS NOT NULL]]>
			</sqlCheck>
		</preConditions>
		<update tableName="location">
 	   		<column name="location_type_id" valueNumeric="1"/>
  		    <where>location_type_id is null</where>
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-02-3">
       <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM location WHERE id = 4]]>
			</sqlCheck>
		</preConditions>
		<update tableName="location">
			<column name="name" value="ZZZ Supply Company" />
  		    <where>id = 4</where>
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-02-4">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="shipment_workflow" columnName="excluded_fields"/></not>
		</preConditions>
		<addColumn tableName="shipment_workflow">
			<column name="excluded_fields" type="varchar(255)">
				<constraints nullable="true"/>
			</column>
		</addColumn>
		<update tableName="shipment_workflow">
			<column name="excluded_fields" value="carrier,recipient" />
 		    <where>id = 1</where>
		</update>
		<update tableName="shipment_workflow">
			<column name="excluded_fields" value="carrier,recipient" />
 		    <where>id = 2</where>
		</update>	
		<update tableName="shipment_workflow">
			<column name="excluded_fields" value="shipmentMethod.shipper" />
 		    <where>id = 3</where>
		</update>	
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-03-1">
       <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="7">
				<![CDATA[SELECT count(*) FROM event_type]]>
			</sqlCheck>
		</preConditions>
		<delete tableName="shipment_event"/>
		<delete tableName="event"/>
		<delete tableName="event_type"/>
		<dropColumn tableName="event_type" columnName="activity_type"/>
		<dropColumn tableName="event_type" columnName="event_type"/>
	</changeSet>	
	
	<changeSet author="mgoodrich" id="2011-03-03-2">
       <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM event_type]]>
			</sqlCheck>
		</preConditions>
		<insert tableName="event_type">
        	<column name="id" valueNumeric="1"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="name" value="Pending"/> 
        	<column name="description" value="Shipment is pending"/> 
        	<column name="event_status" value="CREATED"/> 
        	<column name="sort_order" valueNumeric="1"/> 
        	<column name="date_created" valueDate="2011-03-03"/> 
        	<column name="last_updated" valueDate="2011-03-03"/> 
       	</insert> 
		<insert tableName="event_type">
        	<column name="id" valueNumeric="2"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="name" value="Shipped"/> 
        	<column name="description" value="Shipment has been shipped"/> 
        	<column name="event_status" value="SHIPPED"/> 
        	<column name="sort_order" valueNumeric="2"/> 
        	<column name="date_created" valueDate="2011-03-03"/> 
        	<column name="last_updated" valueDate="2011-03-03"/> 
       	</insert> 
       	<insert tableName="event_type">
        	<column name="id" valueNumeric="3"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="name" value="Received"/> 
        	<column name="description" value="Shipment has been received"/> 
        	<column name="event_status" value="RECEIVED"/> 
        	<column name="sort_order" valueNumeric="3"/> 
        	<column name="date_created" valueDate="2011-03-03"/> 
        	<column name="last_updated" valueDate="2011-03-03"/> 
       	</insert>
	</changeSet>
	
		
	<changeSet author="mgoodrich" id="2011-03-04-1">
       <preConditions onFail="MARK_RAN">
			<columnExists tableName="event_type" columnName="event_status"/>
		</preConditions>
		<sql>
			alter table event_type change column event_status event_code varchar(255);	
		</sql>		
    </changeSet>
    
    <changeSet author="mgoodrich" id="2011-03-04-2">
    	<update tableName="event_type">
			<column name="name" value="Created" />
			<column name="description" value="Shipment has been created" />
 		    <where>id = 1</where>
		</update>
	</changeSet>
    
	<changeSet author="mgoodrich" id="2011-03-04-3">
        <preConditions onFail="MARK_RAN">
			<columnExists tableName="receipt" columnName="shipment_id"/>
		</preConditions>
			<sql>
				ALTER TABLE receipt DROP FOREIGN KEY FK408272383B5F6286;
			</sql>
			<dropColumn tableName="receipt" columnName="shipment_id"/>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-04-4">
		<delete tableName="receipt_item" />
      	<delete tableName="receipt" />
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-03-04-5">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="shipment" columnName="receipt_id"/></not>
		</preConditions>
		<addColumn tableName="shipment">
			<column name="receipt_id" type="bigint(20)">
				<constraints nullable="true" foreignKeyName="FKE139719AFF77FF9B" references="receipt (id)"/>
			</column>
		</addColumn>
	</changeSet>
	
	
	<!--  clear out all the sample crap -->
	<changeSet author="mgoodrich" id="2011-03-04-20">
		<sql>
			set FOREIGN_KEY_CHECKS = 0;
		</sql>
		<delete tableName="shipment_comment"/>
		<delete tableName="shipment_document"/>
		<delete tableName="shipment_reference_number"/>
		<delete tableName="reference_number"/>
		<delete tableName="shipment_event"/>
		<delete tableName="event"/>
		<delete tableName="shipment_item"/>
		<delete tableName="container"/>
		<delete tableName="receipt"/>
		<delete tableName="receipt_item"/>
		<delete tableName="shipment"/>
		<delete tableName="shipment_method"/>
		<sql>
			set FOREIGN_KEY_CHECKS = 1;
		</sql>
	</changeSet>
	
	
	<changeSet author="mgoodrich" id="2011-03-08-1">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="shipment_workflow" columnName="document_template"/></not>
		</preConditions>
			<addColumn tableName="shipment_workflow">
			  <column name="document_template" type="varchar(255)">
			  	<constraints nullable="true"/>
			  </column>
			</addColumn>
			<update tableName="shipment_workflow">
				<column name="document_template" value="suitcaseLetter" />
 		    <where>id = 3</where>
		</update>	
	</changeSet>
	
	
	<!-- remove the "created" event_type and associated events -->
	<changeSet author="mgoodrich" id="2011-03-16-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM event_type WHERE id='1']]>
			</sqlCheck>
		</preConditions>
			<sql>
			 	DELETE FROM shipment_event WHERE event_id IN (SELECT id FROM event WHERE event_type_id='1');
			</sql>
			<delete tableName="event">
   				 <where>event_type_id='1'</where>
			</delete>
			<delete tableName="event_type">
   				 <where>id='1'</where>
			</delete>
	</changeSet>
	
	<!-- remove "borrowed" transactin type -->
	<changeSet author="mgoodrich" id="2011-03-16-2">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM transaction_type WHERE id='6']]>
			</sqlCheck>
		</preConditions>
			<delete tableName="transaction_type">
   				 <where>id='6'</where>
			</delete>
	</changeSet>
	
	<!--  remove "transfer" transaction type -->
	<changeSet author="mgoodrich" id="2011-03-16-3">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				<![CDATA[SELECT count(*) FROM transaction_type WHERE id='1']]>
			</sqlCheck>
		</preConditions>
			<sql>
   				 DELETE FROM transaction_entry WHERE transaction_id IN (SELECT id FROM transaction WHERE transaction_type_id='1');
			</sql>
			<delete tableName="transaction">
   				 <where>transaction_type_id='1'</where>
			</delete>
			<delete tableName="transaction_type">
   				 <where>id='1'</where>
			</delete>
	</changeSet>
	
	<!--  add new transactions "transfer in" and "transfer out" -->
	<changeSet author="mgoodrich" id="2011-03-16-6">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM transaction_type WHERE id='8' OR id='9']]>
			</sqlCheck>
		</preConditions>
		<insert tableName="transaction_type">
        	<column name="id" valueNumeric="8"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="date_created" valueDate="2011-03-17"/>
            <column name="last_updated" valueDate="2011-03-17"/> 
        	<column name="name" value="Transfer In"/>
        	<column name="sort_order" valueNumeric="0"/>          
        </insert>  
        <insert tableName="transaction_type">
        	<column name="id" valueNumeric="9"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="date_created" valueDate="2011-03-17"/>
            <column name="last_updated" valueDate="2011-03-17"/> 
        	<column name="name" value="Transfer Out"/>
        	<column name="sort_order" valueNumeric="0"/>           
        </insert>      
	</changeSet>
	
    <changeSet author="jmiranda (generated)" id="1300310727276-1">
    	<validCheckSum>b680c2278a5db3230f6c91844ca77</validCheckSum>
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="manufacturer"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="manufacturer" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1300310727276-2">
    	<validCheckSum>78be59fd6c6385d7e9742a6d74d8799</validCheckSum>
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="manufacturer_code"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="manufacturer_code" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1300310727276-3">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="ndc"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="ndc" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    
    <!-- We don't need SKU just yet 
    <changeSet author="jmiranda (generated)" id="1300310727276-4">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="sku"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="sku" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    -->
    
    <changeSet author="jmiranda (generated)" id="1300310727276-5">
        <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="product" columnName="upc"/></not>
		</preConditions>    
        <addColumn tableName="product">
            <column name="upc" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1300310727276-6">
        <preConditions onFail="MARK_RAN">
        	<not><columnExists tableName="product" columnName="unit_of_measure"/></not>
        </preConditions>    
        <addColumn tableName="product">
            <column name="unit_of_measure" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1300310727276-7">
        <addNotNullConstraint columnDataType="DATETIME" columnName="date_created" defaultNullValue="" tableName="shipment_workflow"/>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1300310727276-8">
        <addNotNullConstraint columnDataType="DATETIME" columnName="last_updated" defaultNullValue="" tableName="shipment_workflow"/>
    </changeSet>
    <!--  
    <changeSet author="jmiranda (generated)" id="1300310727276-9">
    	<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK714F9FB572A2C5B4"/></not></preConditions>  
        <createIndex indexName="FK714F9FB572A2C5B4" tableName="location" unique="false">
            <column name="inventory_id"/>
        </createIndex>
    </changeSet>
    -->
    <changeSet author="jmiranda (generated)" id="1300310727276-12">
        <preConditions onFail="MARK_RAN">
        	<columnExists tableName="product_category" columnName="product_categories_id"/>
        </preConditions>    
        <dropColumn columnName="product_categories_id" tableName="product_category"/>
    </changeSet>
    
    <!-- We decided that we don't want to drop this column yet.      
    <changeSet author="jmiranda (generated)" id="1300310727276-13">
        <preConditions onFail="MARK_RAN">
        	<columnExists tableName="product" columnName="product_code"/>
        </preConditions>    
        <dropColumn tableName="product" columnName="product_code"/>
    </changeSet>
	-->

    <changeSet author="jmiranda (generated)" id="1300310727276-14">
        <preConditions onFail="MARK_RAN">
        	<columnExists tableName="inventory_item" columnName="description"/>
        </preConditions>
        <dropColumn tableName="inventory_item" columnName="description"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1300310727276-15">
        <preConditions onFail="MARK_RAN">
        	<columnExists tableName="inventory_item" columnName="active"/>
        </preConditions>
        <dropColumn tableName="inventory_item" columnName="active"/>
    </changeSet>
    
    
    <!-- Had trouble creating these indices  
    <changeSet author="jmiranda (generated)" id="1300310727276-10">
    	<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKAE3064BAF7076438"/></not></preConditions>  
        <createIndex indexName="FKAE3064BAF7076438" tableName="receipt_item" unique="false">
            <column name="receipt_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1300310727276-11">
    	<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKE139719AF7076438"/></not></preConditions>  
        <createIndex indexName="FKE139719AF7076438" tableName="shipment" unique="false">
            <column name="receipt_id"/>
        </createIndex>
    </changeSet>
	-->
	
		
	<changeSet author="mgoodrich" id="2011-03-18-1">
        <preConditions onFail="MARK_RAN">
			<columnExists tableName="receipt_item" columnName="accepted"/>
		</preConditions>
			<dropColumn tableName="receipt_item" columnName="accepted"/>
	</changeSet>
      
      		
	<changeSet author="mgoodrich" id="2011-03-18-2">
       <preConditions onFail="MARK_RAN">
			<columnExists tableName="receipt_item" columnName="quantity_delivered"/>
		</preConditions>
		<sql>
			ALTER TABLE receipt_item CHANGE COLUMN quantity_delivered quantity_shipped int(11);	
		</sql>		
    </changeSet>
    
        
        
    <!--  move back to InnoDB tables -->
	<changeSet author="jmiranda (generated)" id="1302537251592-1">
		<validCheckSum>eef4ebd43add9a49bca649eab72dae6</validCheckSum>
		<sql>
			ALTER TABLE DATABASECHANGELOG ENGINE=InnoDB;
			ALTER TABLE DATABASECHANGELOGLOCK ENGINE=InnoDB;
			ALTER TABLE address ENGINE=InnoDB;
			ALTER TABLE attribute ENGINE=InnoDB;
			ALTER TABLE attribute_options ENGINE=InnoDB;
			ALTER TABLE category ENGINE=InnoDB;
			ALTER TABLE comment ENGINE=InnoDB;
			ALTER TABLE container ENGINE=InnoDB;
			ALTER TABLE container_type ENGINE=InnoDB;
			ALTER TABLE document ENGINE=InnoDB;
			ALTER TABLE document_type ENGINE=InnoDB;
			ALTER TABLE donor ENGINE=InnoDB;
			ALTER TABLE event ENGINE=InnoDB;
			ALTER TABLE event_type ENGINE=InnoDB;
			ALTER TABLE generic_type ENGINE=InnoDB;
			ALTER TABLE inventory ENGINE=InnoDB;
			ALTER TABLE inventory_item ENGINE=InnoDB;
			ALTER TABLE inventory_level ENGINE=InnoDB;
			ALTER TABLE location ENGINE=InnoDB;
			ALTER TABLE location_type ENGINE=InnoDB;
			ALTER TABLE package_type ENGINE=InnoDB;
			ALTER TABLE person ENGINE=InnoDB;
			ALTER TABLE product ENGINE=InnoDB;
			ALTER TABLE product_attribute ENGINE=InnoDB;
			ALTER TABLE product_category ENGINE=InnoDB;
			ALTER TABLE product_tags ENGINE=InnoDB;
			ALTER TABLE receipt ENGINE=InnoDB;
			ALTER TABLE receipt_item ENGINE=InnoDB;
			ALTER TABLE reference_number ENGINE=InnoDB;
			ALTER TABLE reference_number_type ENGINE=InnoDB;
			ALTER TABLE role ENGINE=InnoDB;
			ALTER TABLE setting ENGINE=InnoDB;
			ALTER TABLE shipment ENGINE=InnoDB;
			ALTER TABLE shipment_comment ENGINE=InnoDB;
			ALTER TABLE shipment_document ENGINE=InnoDB;
			ALTER TABLE shipment_event ENGINE=InnoDB;
			ALTER TABLE shipment_item ENGINE=InnoDB;
			ALTER TABLE shipment_method ENGINE=InnoDB;
			ALTER TABLE shipment_reference_number ENGINE=InnoDB;
			ALTER TABLE shipment_type ENGINE=InnoDB;
			ALTER TABLE shipment_workflow ENGINE=InnoDB;
			ALTER TABLE shipment_workflow_container_type ENGINE=InnoDB;
			ALTER TABLE shipment_workflow_reference_number_type ENGINE=InnoDB;
			ALTER TABLE shipper ENGINE=InnoDB;
			ALTER TABLE shipper_service ENGINE=InnoDB;
			ALTER TABLE transaction ENGINE=InnoDB;
			ALTER TABLE transaction_entry ENGINE=InnoDB;
			ALTER TABLE transaction_type ENGINE=InnoDB;
			ALTER TABLE unit_of_measure ENGINE=InnoDB;
			ALTER TABLE user ENGINE=InnoDB;
			ALTER TABLE user_role ENGINE=InnoDB;		
		</sql>      
	</changeSet>
        
    <changeSet author="mgoodrich" id="2011-03-31-1">
    	<validCheckSum>46c4f58ba2444f373fdd53ab635b85f6</validCheckSum>
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="local_transfer"/></not>
		</preConditions>
		  <createTable tableName="local_transfer">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="source_transaction_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="destination_transaction_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </createTable>
     	<modifySql dbms="mysql">
         	<append value=" engine innodb"/>
    	</modifySql>
    </changeSet>
    
     <changeSet author="mgoodrich" id="2011-03-31-2">
     	<addForeignKeyConstraint constraintName="fk_local_transfer_source_transaction_transaction"
	    	baseTableName="local_transfer" baseColumnNames="source_transaction_id" referencedTableName="transaction" referencedColumnNames="id" />
  	   	<addForeignKeyConstraint constraintName="fk_local_transfer_destination_transaction_transaction"
	    	baseTableName="local_transfer" baseColumnNames="destination_transaction_id" referencedTableName="transaction" referencedColumnNames="id" />
     </changeSet>
    
    <changeSet author="mgoodrich" id="2011-04-1-1">
       <preConditions onFail="MARK_RAN">
			<columnExists tableName="transaction_type" columnName="transaction_type"/>
		</preConditions>
		<dropColumn tableName="transaction_type" columnName="transaction_type"/>
    </changeSet>
        
     <changeSet author="mgoodrich" id="2011-04-1-2">
     	<validCheckSum>90a053c4b8b8256bfbe4e8f83b895e3c</validCheckSum>
       <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="transaction_type" columnName="transaction_code"/></not>
		</preConditions>  
    	<addColumn tableName="transaction_type">
            <column name="transaction_code" type="VARCHAR(255)">
            	 <constraints nullable="false"/>
            </column>
        </addColumn>
     </changeSet>
     
     <changeSet author="mgoodrich" id="2011-04-1-3">
        <update tableName="transaction_type">
		    <column name="transaction_code" value="INVENTORY"/>
		    <where>id='7'</where>
		</update> 
		 <update tableName="transaction_type">
		    <column name="transaction_code" value="CREDIT"/>
		    <where>id='3' or id='8'</where>
		</update> 
		<update tableName="transaction_type">
		    <column name="transaction_code" value="DEBIT"/>
		    <where>id='2' or id='4' or id='5' or id='9'</where>
		</update> 
     </changeSet>
  
  <!-- split the ADJUSTMENT transaction type into an ADJUSTMENT- CREDIT and ADJUSTMENT - DEBIT -->
  	<changeSet author="mgoodrich" id="2011-04-5-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM transaction_type WHERE id='10']]>
			</sqlCheck>
		</preConditions>
		<insert tableName="transaction_type">
        	<column name="id" valueNumeric="10"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="date_created" valueDate="2011-04-05"/>
            <column name="last_updated" valueDate="2011-04-05"/> 
        	<column name="name" value="Adjustment - Debit"/>
        	<column name="sort_order" valueNumeric="0"/>   
        	<column name="transaction_code" value="DEBIT"/>       
        </insert>   
        <update tableName="transaction_type">
        	<column name="name" value="Adjustment - Credit"/>
        	<where>id='3'</where>
        </update>   
	</changeSet>
	
	<!-- test migration precondition -->
	<changeSet author="mgoodrich" id="2011-04-5-1-1">
		<!--  we want to fail hard if we have any transactions with both positive and negative transaction entries -->
		<!--  because we have to manually finesse that case -->
		   <preConditions onFail="HALT">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction_entry as a, transaction_entry as b WHERE a.transaction_id = b.transaction_id AND a.quantity > 0 AND b.quantity < 0]]>
			</sqlCheck>
		</preConditions>
	</changeSet>
		
	
	<!-- migrate to the new transaction model: part 1, make all debit transaction quantities positive -->
	<changeSet author="mgoodrich" id="2011-04-5-2">
	  	<!-- we want to fail hard if we find any positive debit transactions, this means that the either we've already -->
	  	<!-- done this migration, OR that the existing data is in a state we didn't expect -->
        <preConditions onFail="HALT">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction, transaction_entry WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id IN (2,4,5,9) AND quantity > 0]]>
			</sqlCheck>
		</preConditions>
		<sql>
			UPDATE transaction, transaction_entry SET quantity = -(quantity) WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id IN (2,4,5,9)
		</sql>
	</changeSet>
	
	<!--  migrate to the new transaction model: part 2, move all inventory transactions to adjustments -->
	<changeSet author="mgoodrich" id="2011-04-5-3">
	  	<!-- we want to fail hard if we find any adjustment-debit transactions, this means that the either we've already -->
	  	<!-- done this migration, or we have some data we didn't expect -->
        <preConditions onFail="HALT">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction, transaction_entry WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id='10']]>
			</sqlCheck>
		</preConditions>
		<sql>
			UPDATE transaction, transaction_entry SET transaction_type_id='3' WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id='7' AND quantity >= 0;
			UPDATE transaction, transaction_entry SET transaction_type_id='10' WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id='7';
			UPDATE transaction, transaction_entry SET quantity = -(quantity) WHERE transaction.id = transaction_entry.transaction_id AND transaction.transaction_type_id='10';
		</sql>
	</changeSet>
	
	<!-- double-check here that all transactions entries now have positive quantities -->
	<changeSet author="mgoodrich" id="2011-04-5-4">
        <preConditions onFail="HALT">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction_entry WHERE quantity < 0]]>
			</sqlCheck>
		</preConditions>
	</changeSet>	
	
	<!--  add the new product inventory type -->
	<changeSet author="mgoodrich" id="2011-04-6-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM transaction_type WHERE id='11']]>
			</sqlCheck>
		</preConditions>
		<insert tableName="transaction_type">
        	<column name="id" valueNumeric="11"/>
        	<column name="version" valueNumeric="0"/>
        	<column name="date_created" valueDate="2011-04-06"/>
            <column name="last_updated" valueDate="2011-04-06"/> 
        	<column name="name" value="Product Inventory"/>
        	<column name="sort_order" valueNumeric="0"/>   
        	<column name="transaction_code" value="PRODUCT_INVENTORY"/>       
        </insert>   
	</changeSet>
	
	<changeSet author="jmiranda (generated)" id="1301410966941-1">
       <preConditions onFail="MARK_RAN">
			<not><columnExists tableName="shipment" columnName="stated_value"/></not>
		</preConditions>
		<addColumn tableName="shipment">
			<column name="stated_value" type="FLOAT(12,0)"/>
		</addColumn>
	</changeSet>
	
	<!-- make sure we don't have any data quality issues before removing lot_number and product_id columns from transactions -->
	<changeSet author="mgoodrich" id="2011-04-13">
       <preConditions onFail="HALT">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction_entry, inventory_item WHERE transaction_entry.inventory_item_id = inventory_item.id AND transaction_entry.product_id != inventory_item.product_id AND transaction_entry.product_id IS NOT NULL]]>
			</sqlCheck>
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT COUNT(*) FROM transaction_entry, inventory_item WHERE transaction_entry.inventory_item_id = inventory_item.id AND transaction_entry.lot_number != inventory_item.lot_number AND transaction_entry.lot_number IS NOT NULL]]>
			</sqlCheck>
		</preConditions>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-04-13-1">
       <preConditions onFail="MARK_RAN">
			<columnExists tableName="transaction_entry" columnName="lot_number"/>
		</preConditions>
		<dropColumn tableName="transaction_entry" columnName="lot_number"/>
	</changeSet>
	
	<changeSet author="jmiranda" id="2011-04-13-1-1" failOnError="false">
		<preConditions onFail="MARK_RAN" >
			<indexExists indexName="FKABC21FD1DED5FAE7"/>
		</preConditions>
		<sql>
			ALTER TABLE transaction_entry DROP INDEX `FKABC21FD1DED5FAE7`, DROP FOREIGN KEY `FKABC21FD1DED5FAE7`;
		</sql>	
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-04-13-2">
       <preConditions onFail="MARK_RAN">
			<columnExists tableName="transaction_entry" columnName="product_id"/>
		</preConditions>
		<sql>
			set FOREIGN_KEY_CHECKS = 0;
			ALTER TABLE transaction_entry DROP COLUMN product_id;
			set FOREIGN_KEY_CHECKS = 1;
		</sql>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-04-14-1">
   		<modifyColumn tableName="container">
    		<column name="height" type="float(12,3)"/>
		</modifyColumn>
		<modifyColumn tableName="container">
    		<column name="width" type="float(12,3)"/>
		</modifyColumn>
		<modifyColumn tableName="container">
    		<column name="length" type="float(12,3)"/>
		</modifyColumn>
		<modifyColumn tableName="container">
    		<column name="weight" type="float(12,3)"/>
		</modifyColumn>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-04-14-2">
   		<modifyColumn tableName="shipment">
    		<column name="total_value" type="float(12,2)"/>
		</modifyColumn>
		<modifyColumn tableName="shipment">
    		<column name="stated_value" type="float(12,2)"/>
		</modifyColumn>
	</changeSet>

	<changeSet author="mgoodrich" id="2011-04-20-01">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="inventory_item" columnName="serial_number"/>
		</preConditions>
        <dropColumn tableName="inventory_item" columnName="serial_number"/>
	</changeSet>

	<changeSet author="mgoodrich" id="2011-04-20-02">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="receipt_item" columnName="serial_number"/>
		</preConditions>
        <dropColumn tableName="receipt_item" columnName="serial_number"/>
	</changeSet>
	
	<changeSet author="mgoodrich" id="2011-04-27-01">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="shipment_item" columnName="serial_number"/>
		</preConditions>
        <dropColumn tableName="shipment_item" columnName="serial_number"/>
	</changeSet>
	
    <changeSet author="jmiranda (generated)" id="1304717097013-1">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="bg_color"/></not>
		</preConditions>
        <addColumn tableName="location">
            <column name="bg_color" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1304717097013-2">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="fg_color"/></not>
		</preConditions>
        <addColumn tableName="location">
            <column name="fg_color" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
        
    <changeSet author="jmiranda (generated)" id="1305747921161-1">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="order" /></not>
		</preConditions>    
        <createTable tableName="order">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME"/>
            <column name="date_ordered" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="destination_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME"/>
            <column name="order_number" type="VARCHAR(255)"/>
            <column name="ordered_by_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="origin_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="recipient_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-2">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="order_comment" /></not>
		</preConditions>    
        <createTable tableName="order_comment">
            <column name="order_comments_id" type="BIGINT"/>
            <column name="comment_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-3">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="order_document" /></not>
		</preConditions>    
        <createTable tableName="order_document">
            <column name="order_documents_id" type="BIGINT"/>
            <column name="document_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-4">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="order_item" /></not>
		</preConditions>    
        <createTable tableName="order_item">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category_id" type="BIGINT"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="inventory_item_id" type="BIGINT"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="order_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="product_id" type="BIGINT"/>
            <column name="quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="requested_by_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-5">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="order_item_comment" /></not>
		</preConditions>    
        <createTable tableName="order_item_comment">
            <column name="order_item_comments_id" type="BIGINT"/>
            <column name="comment_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-9">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK651874E1E2B3CDC"/></not></preConditions> 
        <createIndex indexName="FK651874E1E2B3CDC" tableName="order" unique="false">
            <column name="destination_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-10">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK651874E44979D51"/></not></preConditions> 
        <createIndex indexName="FK651874E44979D51" tableName="order" unique="false">
            <column name="recipient_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-11">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK651874E635BDB37"/></not></preConditions> 
        <createIndex indexName="FK651874E635BDB37" tableName="order" unique="false">
            <column name="ordered_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-12">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK651874EDBDEDAC4"/></not></preConditions> 
        <createIndex indexName="FK651874EDBDEDAC4" tableName="order" unique="false">
            <column name="origin_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-13">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2DE9EE6EB8839C0F"/></not></preConditions> 
        <createIndex indexName="FK2DE9EE6EB8839C0F" tableName="order_comment" unique="false">
            <column name="order_comments_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-14">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2DE9EE6EC4A49BBF"/></not></preConditions> 
        <createIndex indexName="FK2DE9EE6EC4A49BBF" tableName="order_comment" unique="false">
            <column name="comment_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-15">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKE698D2ECC800AA15"/></not></preConditions> 
        <createIndex indexName="FKE698D2ECC800AA15" tableName="order_document" unique="false">
            <column name="document_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-16">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKE698D2ECFE10118D"/></not></preConditions> 
        <createIndex indexName="FKE698D2ECFE10118D" tableName="order_document" unique="false">
            <column name="order_documents_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-17">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2D110D64911E7578"/></not></preConditions> 
        <createIndex indexName="FK2D110D64911E7578" tableName="order_item" unique="false">
            <column name="requested_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-18">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2D110D64AA992CED"/></not></preConditions> 
        <createIndex indexName="FK2D110D64AA992CED" tableName="order_item" unique="false">
            <column name="inventory_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-19">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2D110D64D08EDBE6"/></not></preConditions> 
        <createIndex indexName="FK2D110D64D08EDBE6" tableName="order_item" unique="false">
            <column name="order_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-20">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2D110D64DED5FAE7"/></not></preConditions> 
        <createIndex indexName="FK2D110D64DED5FAE7" tableName="order_item" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-21">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK2D110D64EF4C770D"/></not></preConditions> 
        <createIndex indexName="FK2D110D64EF4C770D" tableName="order_item" unique="false">
            <column name="category_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1305747921161-22">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FKB5A4FE84C4A49BBF"/></not></preConditions> 
        <createIndex indexName="FKB5A4FE84C4A49BBF" tableName="order_item_comment" unique="false">
            <column name="comment_id"/>
        </createIndex>
    </changeSet>
    
    <!-- Adding many-to-many table to link orders to events -->
    <changeSet author="jmiranda (generated)" id="1306972453064-1">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="order_event"/></not></preConditions> 
        <createTable tableName="order_event">
            <column name="order_events_id" type="BIGINT"/>
            <column name="event_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    
    <!-- Adding many-to-many table to link orders to shipments -->
    <changeSet author="jmiranda (generated)" id="1306972453064-2">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="order_shipment"/></not></preConditions> 
        <createTable tableName="order_shipment">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="order_item_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="shipment_item_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
   
    <changeSet author="jmiranda (generated)" id="1306972453064-6">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK74D92A69786431F"/></not></preConditions> 
        <createIndex indexName="FK74D92A69786431F" tableName="order_event" unique="false">
            <column name="event_id"/>
        </createIndex>
    </changeSet>

    <changeSet author="jmiranda (generated)" id="1306972453064-8">
		<preConditions onFail="MARK_RAN"><not><indexExists indexName="FK9475736B3BE9D843"/></not></preConditions> 
        <createIndex indexName="FK9475736B3BE9D843" tableName="order_shipment" unique="false">
            <column name="order_item_id"/>
        </createIndex>
    </changeSet>    
    
    <changeSet author="jmiranda (generated)" id="1307724260524-1">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="order" columnName="status"/></not></preConditions> 
        <addColumn tableName="order">
            <column name="status" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
	<changeSet author="jmiranda (generated)" id="1307724260524-2">
        <dropNotNullConstraint columnDataType="VARCHAR(255)" columnName="date_ordered" tableName="order"/>
    </changeSet>    

    <changeSet author="jmiranda (generated)" id="1307984579320-1">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="shipment_item" columnName="expiration_date"/></not></preConditions> 
        <addColumn tableName="shipment_item">
            <column name="expiration_date" type="DATETIME"/>
        </addColumn>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1309292553044-1">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="order_item" columnName="unit_price"/></not></preConditions> 
        <addColumn tableName="order_item">
            <column name="unit_price" type="FLOAT(12,0)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1309292553044-4">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="shipment" columnName="weight"/></not></preConditions> 
        <addColumn tableName="shipment">
            <column name="weight" type="FLOAT(12,0)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1309292553044-5">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="shipment" columnName="weight_units"/></not></preConditions> 
        <addColumn tableName="shipment">
            <column name="weight_units" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>

    <changeSet author="mgoodrich" id="2011-07-29-1">
		<preConditions onFail="MARK_RAN"><not><columnExists tableName="user" columnName="locale"/></not></preConditions> 
        <addColumn tableName="user">
            <column name="locale" type="VARCHAR(10)"/>
        </addColumn>
    </changeSet>

    
    
    <changeSet author="jmiranda (generated)" id="1311970402546-1">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="request" /></not></preConditions> 
        <createTable tableName="request">        
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME"/>
            <column name="date_requested" type="DATETIME"/>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="destination_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME"/>
            <column name="origin_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="recipient_id" type="BIGINT"/>
            <column name="request_number" type="VARCHAR(255)"/>
            <column name="requested_by_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1311970402546-2">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="request_comment" /></not></preConditions> 
        <createTable tableName="request_comment">
            <column name="request_comments_id" type="BIGINT"/>
            <column name="comment_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1311970402546-3">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="request_document" /></not></preConditions> 
        <createTable tableName="request_document">
            <column name="request_documents_id" type="BIGINT"/>
            <column name="document_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1311970402546-4">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="request_event" /></not></preConditions> 
        <createTable tableName="request_event">
            <column name="request_events_id" type="BIGINT"/>
            <column name="event_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1311970402546-5">
	    <preConditions onFail="MARK_RAN"><not><tableExists tableName="request_item" /></not></preConditions> 
        <createTable tableName="request_item">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category_id" type="BIGINT"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="inventory_item_id" type="BIGINT"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="product_id" type="BIGINT"/>
            <column name="quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="request_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="requested_by_id" type="BIGINT"/>
            <column name="unit_price" type="FLOAT(12,0)"/>
        </createTable>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1313074391957-1">
        <preConditions onFail="MARK_RAN"><not><tableExists tableName="fulfillment" /></not></preConditions>
        <createTable tableName="fulfillment">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="date_fulfilled" type="DATETIME"/>
            <column name="fulfilled_by_id" type="BIGINT"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-2">
        <preConditions onFail="MARK_RAN"><not><tableExists tableName="fulfillment_item" /></not></preConditions>
        <createTable tableName="fulfillment_item">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="fulfillment_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="inventory_item_id" type="BIGINT"/>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="quantity" type="INT"/>
            <column name="request_item_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-3">
        <preConditions onFail="MARK_RAN"><not><tableExists tableName="fulfillment_item_shipment_item" /></not></preConditions>
        <createTable tableName="fulfillment_item_shipment_item">
            <column name="fulfillment_item_shipment_items_id" type="BIGINT"/>
            <column name="shipment_item_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-4">
        <preConditions onFail="MARK_RAN"><not><tableExists tableName="request_shipment" /></not></preConditions>
        <createTable tableName="request_shipment">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="request_item_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="shipment_item_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-5">
        <preConditions onFail="MARK_RAN"><not><columnExists tableName="request" columnName="fulfillment_id"/></not></preConditions>
        <addColumn tableName="request">
            <column name="fulfillment_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-6">
        <preConditions onFail="MARK_RAN"><columnExists tableName="user" columnName="locale"/></preConditions>
        <modifyColumn tableName="user">
            <column name="locale" type="VARCHAR(255)"/>
        </modifyColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-7">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK5A2551DEAC392B33" /></not></preConditions>
        <createIndex indexName="FK5A2551DEAC392B33" tableName="fulfillment" unique="false">
            <column name="fulfilled_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-8">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FKEDC55CD447EBE106" /></not></preConditions>
        <createIndex indexName="FKEDC55CD447EBE106" tableName="fulfillment_item" unique="false">
            <column name="request_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-9">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FKEDC55CD494567276" /></not></preConditions>
        <createIndex indexName="FKEDC55CD494567276" tableName="fulfillment_item" unique="false">
            <column name="fulfillment_id"/>
        </createIndex>
    </changeSet>


    <changeSet author="jmiranda (generated)" id="1313074391957-10">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FKEDC55CD4AA992CED" /></not></preConditions>
        <createIndex indexName="FKEDC55CD4AA992CED" tableName="fulfillment_item" unique="false">
            <column name="inventory_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-11">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FKE071DE6DB06EC4FB" /></not></preConditions>
        <createIndex indexName="FKE071DE6DB06EC4FB" tableName="fulfillment_item_shipment_item" unique="false">
            <column name="shipment_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-14">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK414EF28F1E2B3CDC" /></not></preConditions>
        <createIndex indexName="FK414EF28F1E2B3CDC" tableName="request" unique="false">
            <column name="destination_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-15">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK414EF28F44979D51" /></not></preConditions>
        <createIndex indexName="FK414EF28F44979D51" tableName="request" unique="false">
            <column name="recipient_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-16">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK414EF28F94567276" /></not></preConditions>
        <createIndex indexName="FK414EF28F94567276" tableName="request" unique="false">
            <column name="fulfillment_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-17">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK414EF28FDBDEDAC4" /></not></preConditions>
        <createIndex indexName="FK414EF28FDBDEDAC4" tableName="request" unique="false">
            <column name="origin_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-18">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK414EF28FDD302242" /></not></preConditions>
        <createIndex indexName="FK414EF28FDD302242" tableName="request" unique="false">
            <column name="requested_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-19">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK5BAC88AF87AC2D52" /></not></preConditions>
        <createIndex indexName="FK5BAC88AF87AC2D52" tableName="request_comment" unique="false">
            <column name="request_comments_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-20">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK5BAC88AFC4A49BBF" /></not></preConditions>
        <createIndex indexName="FK5BAC88AFC4A49BBF" tableName="request_comment" unique="false">
            <column name="comment_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-21">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK712980CB2777B76E" /></not></preConditions>
        <createIndex indexName="FK712980CB2777B76E" tableName="request_document" unique="false">
            <column name="request_documents_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-22">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK712980CBC800AA15" /></not></preConditions>
        <createIndex indexName="FK712980CBC800AA15" tableName="request_document" unique="false">
            <column name="document_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-23">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK674F60EA786431F" /></not></preConditions>
        <createIndex indexName="FK674F60EA786431F" tableName="request_event" unique="false">
            <column name="event_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-24">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK674F60EAD962700D" /></not></preConditions>
        <createIndex indexName="FK674F60EAD962700D" tableName="request_event" unique="false">
            <column name="request_events_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-25">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4DA982C35DE21C87" /></not></preConditions>
        <createIndex indexName="FK4DA982C35DE21C87" tableName="request_item" unique="false">
            <column name="request_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-26">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4DA982C3911E7578" /></not></preConditions>
        <createIndex indexName="FK4DA982C3911E7578" tableName="request_item" unique="false">
            <column name="requested_by_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-27">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4DA982C3AA992CED" /></not></preConditions>
        <createIndex indexName="FK4DA982C3AA992CED" tableName="request_item" unique="false">
            <column name="inventory_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-28">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4DA982C3DED5FAE7" /></not></preConditions>
        <createIndex indexName="FK4DA982C3DED5FAE7" tableName="request_item" unique="false">
            <column name="product_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-29">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK4DA982C3EF4C770D" /></not></preConditions>
        <createIndex indexName="FK4DA982C3EF4C770D" tableName="request_item" unique="false">
            <column name="category_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-30">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK1F06214A47EBE106" /></not></preConditions>
        <createIndex indexName="FK1F06214A47EBE106" tableName="request_shipment" unique="false">
            <column name="request_item_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1313074391957-31">
        <preConditions onFail="MARK_RAN"><not><indexExists indexName="FK1F06214AB06EC4FB" /></not></preConditions>
        <createIndex indexName="FK1F06214AB06EC4FB" tableName="request_shipment" unique="false">
            <column name="shipment_item_id"/>
        </createIndex>
    </changeSet>
    
	<changeSet author="mgoodrich" id="18-Aug-2011">
		<update tableName="event_type">
		    <column name="name" value="Shipped|fr:Expdi"/>
		    <where>event_code='SHIPPED'</where>
		</update>
		<update tableName="event_type">
		    <column name="name" value="Received|fr:Reu"/>
		    <where>event_code='RECEIVED'</where>
		</update>   
	</changeSet>
    
    <changeSet author="mgoodrich" id="18-Aug-2011-2">
		<update tableName="location_type">
		    <column name="name" value="Warehouse|fr:Entrept"/>
		    <where>code='locationType.warehouse'</where> 
		</update>
		<update tableName="location_type">
		    <column name="name" value="Depot|fr:Dpot"/>
		    <where>code='locationType.depot'</where> 
		</update>
		<update tableName="location_type">
		    <column name="name" value="Pharmacy|fr:Pharmacie"/>
		    <where>code='locationType.pharmacy'</where> 
		</update>
		<update tableName="location_type">
		    <column name="name" value="Supplier|fr:Fournisseurs"/>
		    <where>code='locationType.supplier'</where> 
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="18-Aug-2011-3">
		<update tableName="transaction_type">
		    <column name="name" value="Consumption|fr:Consommation"/>
		    <where>id='2'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Adjustment - Credit|fr:Ajustement - Crdit"/>
		    <where>id='3'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Expired|fr:Espir"/>
		    <where>id='4'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Damaged|fr:Endommag"/>
		    <where>id='5'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Inventory|fr:Inventaire"/>
		    <where>id='7'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Transfer In|fr:Transfrer en"/>
		    <where>id='8'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Transfer Out|fr:Transfrer hors"/>
		    <where>id='9'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Adjustment - Debit|fr:Ajustement - Dbit"/>
		    <where>id='10'</where> 
		</update>
		<update tableName="transaction_type">
		    <column name="name" value="Product Inventory|fr:Inventaire de Produits"/>
		    <where>id='11'</where> 
		</update>
	</changeSet>
    
     <changeSet author="mgoodrich" id="18-Aug-2011-4">
		<update tableName="container_type">
		    <column name="name" value="Container|fr:Conteneur"/>
		    <where>id='1'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Pallet|fr:Palette"/>
		    <where>id='2'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Suitcase|fr:Valise/Malette"/>
		    <where>id='3'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Box|fr:Boite"/>
		    <where>id='4'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Trunk|fr:Coffre"/>
		    <where>id='5'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Item|fr:Element"/>
		    <where>id='6'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Other|fr:Autre"/>
		    <where>id='7'</where> 
		</update>
		<update tableName="container_type">
		    <column name="name" value="Crate|fr:Caisse"/>
		    <where>id='8'</where> 
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="18-Aug-2011-5">
		<update tableName="document_type">
		    <column name="name" value="Facture donne par la ligne arienne|fr:Conteneur"/>
		    <where>id='1'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Bill of Lading|fr:Facture de la cargaison"/>
		    <where>id='2'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Packing List|fr:Lisde de chargement"/>
		    <where>id='3'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Certificate of Donation|fr:Certificat de don"/>
		    <where>id='4'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Commercial Invoice|fr:Facture Commerciale"/>
		    <where>id='5'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Material Safey Data Sheet|fr:Fiche signaltique"/>
		    <where>id='6'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Certificate of Analysis|fr:Certificat d'analyse"/>
		    <where>id='7'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Manifest|fr:Manifeste"/>
		    <where>id='8'</where> 
		</update>
		<update tableName="document_type">
		    <column name="name" value="Other|fr:Autre"/>
		    <where>id='9'</where> 
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="18-Aug-2011-6">
		<update tableName="shipment_type">
		    <column name="name" value="Air|fr:Air"/>
		    <where>id='1'</where>
		</update>
		<update tableName="shipment_type">
		    <column name="name" value="Sea|fr:Mer"/>
		    <where>id='2'</where>
		</update>
		<update tableName="shipment_type">
		    <column name="name" value="Suitcase|fr:Valise/Malette"/>
		    <where>id='4'</where>
		</update>
	</changeSet>
	
	<changeSet author="mgoodrich" id="19-Aug-2011-2">
		<update tableName="reference_number_type">
		    <column name="name" value="Purchase Order Number|fr:Nombre de commande"/>
		    <where>id='1'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Customer name|fr:Nom du client"/>
		    <where>id='2'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Internal Identifier|fr:Identificateur interne"/>
		    <where>id='3'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Bill of Lading Number|fr:Nombre de connaissement"/>
		    <where>id='4'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Air Waybill Number|fr:Nombre de lettre de transport arien"/>
		    <where>id='5'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Container Number|fr:Nombre de conteneur"/>
		    <where>id='6'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Seal Number|fr:Nombre de sceau"/>
		    <where>id='7'</where>
		</update>
		<update tableName="reference_number_type">
		    <column name="name" value="Flight Number|fr:Nombre de vol"/>
		    <where>id='8'</where>
		</update>
	</changeSet>
	
	
     <changeSet author="jmiranda" id="22-Aug-2011-1">
        <preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				<![CDATA[SELECT count(*) FROM shipment_type WHERE name="Land|fr:Terrains" OR id=3]]>
			</sqlCheck>
		</preConditions>
        <insert tableName="shipment_type">
        	<column name="id" valueNumeric="3"/>
        	<column name="name" value="Land|fr:Terrains"/>
        	<column name="description" value=""/>
        	<column name="sort_order" valueNumeric="3"/>
            <column name="version" valueNumeric="0"/>
			<column name="date_created" valueDate="2011-08-22"/>
            <column name="last_updated" valueDate="2011-08-22"/>            
        </insert>        
     </changeSet>	
    
    <changeSet author="jmiranda (generated)" id="1314195613593-1">
		<preConditions onFail="MARK_RAN"><not><tableExists tableName="consumption" /></not></preConditions>
        <createTable tableName="consumption">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="day" type="INT"/>
            <column name="inventory_item_id" type="BIGINT"/>
            <column name="month" type="INT"/>
            <column name="product_id" type="BIGINT"/>
            <column name="year" type="INT"/>
            <column name="location_id" type="BIGINT"/>
            <column name="transaction_date" type="DATETIME"/>
            <column name="date_created" type="DATETIME"/>
            <column name="last_updated" type="DATETIME"/>
            <column name="quantity" type="INT"/>
        </createTable>
    </changeSet>
    
    
    <changeSet author="jmiranda (generated)" id="1318962118596-1">
	    <preConditions onFail="MARK_RAN"><not><columnExists tableName="inventory_level" columnName="status"/></not></preConditions>
        <addColumn tableName="inventory_level">
            <column name="status" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1318962118596-2">
		<update tableName="inventory_level">
		    <column name="status" value="SUPPORTED"/>
		    <where>supported = true</where>
		</update>
	</changeSet>    
    <changeSet author="jmiranda (generated)" id="1318962118596-3">
		<update tableName="inventory_level">
		    <column name="status" value="NOT_SUPPORTED"/>
		    <where>supported = false</where>
		</update>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1318962118596-4">
	    <preConditions onFail="MARK_RAN"><columnExists tableName="inventory_level" columnName="supported"/></preConditions>
        <dropColumn tableName="inventory_level" columnName="supported"/>
    </changeSet>	    
    
    <changeSet author="jmiranda (generated)" id="1320688524312-1">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="transaction" columnName="comment" /></not>
		</preConditions>
        <addColumn tableName="transaction">
            <column name="comment" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    
    <changeSet author="jmiranda (generated)" id="1320943767698-2">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="location_group" /></not>
		</preConditions>
        <createTable tableName="location_group">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-3">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="location_supported_activities" /></not>
		</preConditions>
        <createTable tableName="location_supported_activities">
            <column name="location_id" type="BIGINT"/>
            <column name="supported_activities_string" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-5">
		<preConditions onFail="MARK_RAN">
			<not><tableExists tableName="location_type_supported_activities" /></not>
		</preConditions>
        <createTable tableName="location_type_supported_activities">
            <column name="location_type_id" type="BIGINT"/>
            <column name="supported_activities_string" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-6">
		<preConditions onFail="MARK_RAN">
			<not><columnExists tableName="location" columnName="location_group_id"/></not>
		</preConditions>
        <addColumn tableName="location">
            <column name="location_group_id" type="BIGINT"/>
        </addColumn>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1320943767698-7">
		<preConditions onFail="MARK_RAN">
			<columnExists tableName="location" columnName="class"/>
		</preConditions>
    	<comment>Update location by removing unnecessary class column.</comment>
		<dropColumn tableName="location" columnName="class"/>
    </changeSet>    
    <changeSet author="jmiranda (generated)" id="1320943767698-8">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="1">
            	SELECT count(*) 
            	FROM location_type 
            	WHERE code = "locationType.pharmacy"
            </sqlCheck>
        </preConditions>
	    <comment>Convert 'Pharmacy' to 'Dispensary'.</comment>
	    <update tableName="location_type">
            <column name="code" value="locationType.dispensary"/>
            <column name="description" value="Dispensary"/>
            <column name="last_updated" valueDate="2011-11-14"/>
            <column name="name" value="Dispensary|fr:Dispensaire"/>
            <where>code='locationType.pharmacy'</where>
        </update>
	</changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-9">
    	<comment>Convert all locations of 'Warehouse' location type to 'Depot' location type.</comment>
		<update tableName="location">
			<column name="location_type_id" valueNumeric="2"/>
			<where>location_type_id = 1</where>
		</update>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-10">
    	<comment>Delete the supported activities for the 'Warehouse' location type.</comment>
		<delete tableName="location_type_supported_activities">
			<where>location_type_id = 1</where>
		</delete>    
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-11">
    	<comment>Delete the 'Warehouse' location types.</comment>
		<delete tableName="location_type">
			<where>code='locationType.warehouse'</where>
		</delete>    
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-12">
    	<comment>All location should be marked as active.</comment>
		<update tableName="location">
			<column name="active" valueBoolean="true"/>
		</update>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-13">
    	<preConditions>
    		<tableExists tableName="generic_type"/>
    	</preConditions>
    	<comment>Drop unused table.</comment>
		<dropTable tableName="generic_type"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-14">
    	<preConditions>
    		<tableExists tableName="package_type"/>
    	</preConditions>
    	<comment>Drop unused table.</comment>
		<dropTable tableName="package_type"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-15">
    	<preConditions>
    		<tableExists tableName="setting"/>
    	</preConditions>
    	<comment>Drop unused table.</comment>
		<dropTable tableName="setting"/>
    </changeSet>
    <changeSet author="jmiranda (generated)" id="1320943767698-16">
    	<preConditions onFail="MARK_RAN">
    		<columnExists tableName="location_type" columnName="code"/>
    	</preConditions>
    	<comment>Drop locationType.code as it is never used.</comment>
    	<dropColumn tableName="location_type" columnName="code"/>
    </changeSet>
	<changeSet author="jmiranda" id="320943767698-17">
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">MANAGE_INVENTORY</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">PLACE_ORDER</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">PLACE_REQUEST</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">FULFILL_REQUEST</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">SEND_STOCK</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">RECEIVE_STOCK</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">2</column>
			<column name="supported_activities_string">EXTERNAL</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">3</column>
			<column name="supported_activities_string">SEND_STOCK</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">3</column>
			<column name="supported_activities_string">RECEIVE_STOCK</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">4</column>
			<column name="supported_activities_string">FULFILL_ORDER</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">4</column>
			<column name="supported_activities_string">SEND_STOCK</column>
		</insert>
		<insert tableName="location_type_supported_activities">
			<column name="location_type_id">4</column>
			<column name="supported_activities_string">EXTERNAL</column>
		</insert>
	</changeSet>    
	
    <!-- Do not include any more changes in this file -->
    <changeSet author="DatabaseVersion" id="0.3.x" />
    	
	
</databaseChangeLog>



